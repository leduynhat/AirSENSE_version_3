

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->

<!-- Mirrored from docs.espressif.com/projects/esp-idf/en/latest/api-reference/storage/fatfs.html by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 29 Feb 2020 06:26:27 GMT -->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>FAT Filesystem Support &mdash; ESP-IDF Programming Guide v4.1-dev-2071-gf91080637 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
        <script type="text/javascript" src="../../../../../../../media.readthedocs.com/javascript/readthedocs-doc-embed.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/theme_overrides.css" type="text/css" />
    <link rel="author" title="About these documents" href="../../about.html" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Manufacturing Utility" href="mass_mfg.html" />
    <link rel="prev" title="Storage API" href="index.html" /> 

<!-- RTD Extra Head -->

<!-- 
Always link to the latest version, as canonical.
http://docs.readthedocs.org/en/latest/canonical.html
-->
<link rel="canonical" href="fatfs.html" />

<link rel="stylesheet" href="../../../../../../../media.readthedocs.com/css/readthedocs-doc-embed.css" type="text/css" />

<script type="text/javascript" src="../../_static/readthedocs-data.js"></script>

<!-- Add page-specific data, which must exist in the page js, not global -->
<script type="text/javascript">
READTHEDOCS_DATA['page'] = "api-reference/storage/fatfs"
READTHEDOCS_DATA['source_suffix'] = ".rst"
</script>

<script type="text/javascript" src="../../../../../../../media.readthedocs.com/javascript/readthedocs-analytics.js"></script>

<!-- end RTD <extrahead> -->
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index-2.html" class="icon icon-home"> ESP-IDF Programming Guide
          

          
            
            <img src="../../_static/espressif-logo.svg" class="logo" alt="Logo"/>
          
          </a>

          
            
            
            
              <div class="version">
                latest
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="https://docs.espressif.com/projects/esp-idf/en/latest/search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../get-started/index.html">Get Started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">API Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../bluetooth/index.html">Bluetooth</a></li>
<li class="toctree-l2"><a class="reference internal" href="../network/index.html">Networking</a></li>
<li class="toctree-l2"><a class="reference internal" href="../peripherals/index.html">Peripherals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../protocols/index.html">Protocols</a></li>
<li class="toctree-l2"><a class="reference internal" href="../provisioning/index.html">Provisioning</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Storage</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">FAT Filesystem</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#using-fatfs-with-vfs">Using FatFs with VFS</a></li>
<li class="toctree-l4"><a class="reference internal" href="#using-fatfs-with-vfs-and-sd-cards">Using FatFs with VFS and SD cards</a></li>
<li class="toctree-l4"><a class="reference internal" href="#using-fatfs-with-vfs-in-read-only-mode">Using FatFs with VFS in read-only mode</a></li>
<li class="toctree-l4"><a class="reference internal" href="#fatfs-disk-io-layer">FatFS disk IO layer</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="mass_mfg.html">Mass Manufacturing Utility</a></li>
<li class="toctree-l3"><a class="reference internal" href="nvs_flash.html">Non-Volatile Storage</a></li>
<li class="toctree-l3"><a class="reference internal" href="nvs_partition_gen.html">NVS Partition Generation Utility</a></li>
<li class="toctree-l3"><a class="reference internal" href="sdmmc.html">SD/SDIO/MMC Driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="spi_flash.html">SPI Flash and Partition APIs</a></li>
<li class="toctree-l3"><a class="reference internal" href="spiffs.html">SPIFFS Filesystem</a></li>
<li class="toctree-l3"><a class="reference internal" href="vfs.html">Virtual Filesystem</a></li>
<li class="toctree-l3"><a class="reference internal" href="wear-levelling.html">Wear Levelling</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../system/index.html">System</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kconfig.html">Configuration Options</a></li>
<li class="toctree-l2"><a class="reference internal" href="../error-codes.html">Error Codes Reference</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../hw-reference/index.html">H/W Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../esp32s2.html">ESP32-S2 Preview Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api-guides/index.html">API Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../libraries-and-frameworks/index.html">Libraries and Frameworks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contribute/index.html">Contribute</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../versions.html">Versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../resources.html">Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../COPYRIGHT.html">Copyrights</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../about.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../languages.html">语言/Languages</a></li>
<li class="toctree-l1"><a class="reference external" href="https://readthedocs.com/projects/espressif-esp-idf/downloads/">Guide Downloads</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index-2.html">ESP-IDF Programming Guide</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index-2.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">API Reference</a> &raquo;</li>
        
          <li><a href="index.html">Storage API</a> &raquo;</li>
        
      <li>FAT Filesystem Support</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/espressif/esp-idf/blob/master/docs/en/api-reference/storage/fatfs.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="fat-filesystem-support">
<h1>FAT Filesystem Support<a class="headerlink" href="#fat-filesystem-support" title="Permalink to this headline">¶</a></h1>
<p><a class="reference external" href="https://docs.espressif.com/projects/esp-idf/zh_CN/latest/api-reference/storage/fatfs.html">[中文]</a></p>
<p>ESP-IDF uses the <a class="reference external" href="http://elm-chan.org/fsw/ff/00index_e.html">FatFs</a> library to work with FAT filesystems. FatFs resides in the <code class="docutils literal notranslate"><span class="pre">fatfs</span></code> component. Although the library can be used directly, many of its features can be accessed via VFS, using the C standard library and POSIX API functions.</p>
<p>Additionally, FatFs has been modified to support the runtime pluggable disk I/O layer. This allows mapping of FatFs drives to physical disks at runtime.</p>
<div class="section" id="using-fatfs-with-vfs">
<h2>Using FatFs with VFS<a class="headerlink" href="#using-fatfs-with-vfs" title="Permalink to this headline">¶</a></h2>
<p>The header file <a class="reference external" href="https://github.com/espressif/esp-idf/blob/f91080637/components/fatfs/vfs/esp_vfs_fat.h">fatfs/vfs/esp_vfs_fat.h</a> defines the functions for connecting FatFs and VFS.</p>
<p>The function <a class="reference internal" href="#_CPPv420esp_vfs_fat_registerPKcPKc6size_tPP5FATFS" title="esp_vfs_fat_register"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_vfs_fat_register()</span></code></a> allocates a <code class="docutils literal notranslate"><span class="pre">FATFS</span></code> structure and registers a given path prefix in VFS. Subsequent operations on files starting with this prefix are forwarded to FatFs APIs.
The function <a class="reference internal" href="#_CPPv427esp_vfs_fat_unregister_pathPKc" title="esp_vfs_fat_unregister_path"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_vfs_fat_unregister_path()</span></code></a> deletes the registration with VFS, and frees the <code class="docutils literal notranslate"><span class="pre">FATFS</span></code> structure.</p>
<p>Most applications use the following workflow when working with <code class="docutils literal notranslate"><span class="pre">esp_vfs_fat_</span></code> functions:</p>
<ol class="arabic simple">
<li><dl class="first docutils">
<dt>Call <a class="reference internal" href="#_CPPv420esp_vfs_fat_registerPKcPKc6size_tPP5FATFS" title="esp_vfs_fat_register"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_vfs_fat_register()</span></code></a> to specify:</dt>
<dd><ul class="first last">
<li>Path prefix where to mount the filesystem (e.g. <code class="docutils literal notranslate"><span class="pre">&quot;/sdcard&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;/spiflash&quot;</span></code>)</li>
<li>FatFs drive number</li>
<li>A variable which will receive the pointer to the <code class="docutils literal notranslate"><span class="pre">FATFS</span></code> structure</li>
</ul>
</dd>
</dl>
</li>
<li>Call <a class="reference internal" href="#_CPPv418ff_diskio_register4BYTEPK16ff_diskio_impl_t" title="ff_diskio_register"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">ff_diskio_register()</span></code></a> to register the disk I/O driver for the drive number used in Step 1.</li>
<li>Call the FatFs function <code class="docutils literal notranslate"><span class="pre">f_mount</span></code>, and optionally <code class="docutils literal notranslate"><span class="pre">f_fdisk</span></code>, <code class="docutils literal notranslate"><span class="pre">f_mkfs</span></code>, to mount the filesystem using the same drive number which was passed to <a class="reference internal" href="#_CPPv420esp_vfs_fat_registerPKcPKc6size_tPP5FATFS" title="esp_vfs_fat_register"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_vfs_fat_register()</span></code></a>. For more information, see <cite>FatFs documentation &lt;http://www.elm-chan.org/fsw/ff/doc/mount.html&gt;</cite>.</li>
<li>Call the C standard library and POSIX API functions to perform such actions on files as open, read, write, erase, copy, etc. Use paths starting with the path prefix passed to <a class="reference internal" href="vfs.html#_CPPv416esp_vfs_registerPKcPK9esp_vfs_tPv" title="esp_vfs_register"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_vfs_register()</span></code></a> (for example, <code class="docutils literal notranslate"><span class="pre">&quot;/sdcard/hello.txt&quot;</span></code>).</li>
<li>Optionally, call the FatFs library functions directly. In this case, use paths without a VFS prefix (for example, <code class="docutils literal notranslate"><span class="pre">&quot;/hello.txt&quot;</span></code>).</li>
<li>Close all open files.</li>
<li>Call the FatFs function <code class="docutils literal notranslate"><span class="pre">f_mount</span></code> for the same drive number, with NULL <code class="docutils literal notranslate"><span class="pre">FATFS*</span></code> argument, to unmount the filesystem.</li>
<li>Call the FatFs function <a class="reference internal" href="#_CPPv418ff_diskio_register4BYTEPK16ff_diskio_impl_t" title="ff_diskio_register"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">ff_diskio_register()</span></code></a> with NULL <code class="docutils literal notranslate"><span class="pre">ff_diskio_impl_t*</span></code> argument and the same drive number to unregister the disk I/O driver.</li>
<li>Call <a class="reference internal" href="#_CPPv427esp_vfs_fat_unregister_pathPKc" title="esp_vfs_fat_unregister_path"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_vfs_fat_unregister_path()</span></code></a> with the path where the file system is mounted to remove FatFs from VFS, and free the <code class="docutils literal notranslate"><span class="pre">FATFS</span></code> structure allocated in Step 1.</li>
</ol>
<p>The convenience functions <code class="docutils literal notranslate"><span class="pre">esp_vfs_fat_sdmmc_mount</span></code> and <code class="docutils literal notranslate"><span class="pre">esp_vfs_fat_sdmmc_unmount</span></code> wrap the steps described above and also handle SD card initialization. These two functions are described in the next section.</p>
<dl class="function">
<dt id="_CPPv420esp_vfs_fat_registerPKcPKc6size_tPP5FATFS">
<span id="_CPPv320esp_vfs_fat_registerPKcPKc6size_tPP5FATFS"></span><span id="_CPPv220esp_vfs_fat_registerPKcPKc6size_tPP5FATFS"></span><span id="esp_vfs_fat_register__cCP.cCP.s.FATFSPP"></span><span class="target" id="esp__vfs__fat_8h_1ab35397c8c48509cd5adae0344adb00bd"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t">esp_err_t</a> <code class="descname">esp_vfs_fat_register</code><span class="sig-paren">(</span><em class="property">const</em> char *<em>base_path</em>, <em class="property">const</em> char *<em>fat_drive</em>, size_t <em>max_files</em>, FATFS **<em>out_fs</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv420esp_vfs_fat_registerPKcPKc6size_tPP5FATFS" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Register FATFS with VFS component. </p>
<p>This function registers given FAT drive in VFS, at the specified base path. If only one drive is used, fat_drive argument can be an empty string. Refer to FATFS library documentation on how to specify FAT drive. This function also allocates FATFS structure which should be used for f_mount call.</p>
<p><dl class="docutils">
<dt><strong>Note</strong></dt>
<dd>This function doesn’t mount the drive into FATFS, it just connects POSIX and C standard library IO function with FATFS. You need to mount desired drive into FATFS separately.</dd>
<dt><strong>Return</strong></dt>
<dd><ul class="simple">
<li>ESP_OK on success</li>
<li>ESP_ERR_INVALID_STATE if esp_vfs_fat_register was already called</li>
<li>ESP_ERR_NO_MEM if not enough memory or too many VFSes already registered </li>
</ul>
</dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal notranslate"><span class="pre">base_path</span></code>: path prefix where FATFS should be registered </li>
<li><code class="docutils literal notranslate"><span class="pre">fat_drive</span></code>: FATFS drive specification; if only one drive is used, can be an empty string </li>
<li><code class="docutils literal notranslate"><span class="pre">max_files</span></code>: maximum number of files which can be open at the same time </li>
<li><code class="docutils literal notranslate"><span class="pre">out_fs</span></code>: pointer to FATFS structure which can be used for FATFS f_mount call is returned via this argument. </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv427esp_vfs_fat_unregister_pathPKc">
<span id="_CPPv327esp_vfs_fat_unregister_pathPKc"></span><span id="_CPPv227esp_vfs_fat_unregister_pathPKc"></span><span id="esp_vfs_fat_unregister_path__cCP"></span><span class="target" id="esp__vfs__fat_8h_1a85fb92efa1bf2fac6bd209d37778d8f5"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t">esp_err_t</a> <code class="descname">esp_vfs_fat_unregister_path</code><span class="sig-paren">(</span><em class="property">const</em> char *<em>base_path</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv427esp_vfs_fat_unregister_pathPKc" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Un-register FATFS from VFS. </p>
<p><dl class="docutils">
<dt><strong>Note</strong></dt>
<dd>FATFS structure returned by esp_vfs_fat_register is destroyed after this call. Make sure to call f_mount function to unmount it before calling esp_vfs_fat_unregister_ctx. Difference between this function and the one above is that this one will release the correct drive, while the one above will release the last registered one</dd>
<dt><strong>Return</strong></dt>
<dd><ul class="simple">
<li>ESP_OK on success</li>
<li>ESP_ERR_INVALID_STATE if FATFS is not registered in VFS </li>
</ul>
</dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal notranslate"><span class="pre">base_path</span></code>: path prefix where FATFS is registered. This is the same used when esp_vfs_fat_register was called </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
<div class="section" id="using-fatfs-with-vfs-and-sd-cards">
<h2>Using FatFs with VFS and SD cards<a class="headerlink" href="#using-fatfs-with-vfs-and-sd-cards" title="Permalink to this headline">¶</a></h2>
<p>The header file <a class="reference external" href="https://github.com/espressif/esp-idf/blob/f91080637/components/fatfs/vfs/esp_vfs_fat.h">fatfs/vfs/esp_vfs_fat.h</a> defines convenience functions <a class="reference internal" href="#_CPPv423esp_vfs_fat_sdmmc_mountPKcPK12sdmmc_host_tPKvPK26esp_vfs_fat_mount_config_tPP12sdmmc_card_t" title="esp_vfs_fat_sdmmc_mount"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_vfs_fat_sdmmc_mount()</span></code></a> and <a class="reference internal" href="#_CPPv425esp_vfs_fat_sdmmc_unmountv" title="esp_vfs_fat_sdmmc_unmount"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_vfs_fat_sdmmc_unmount()</span></code></a>. These function perform Steps 1–3 and 7–9 respectively and handle SD card initialization, but provide only limited error handling. Developers are encouraged to check its source code and incorporate more advanced features into production applications.</p>
<p>The convenience function <a class="reference internal" href="#_CPPv425esp_vfs_fat_sdmmc_unmountv" title="esp_vfs_fat_sdmmc_unmount"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_vfs_fat_sdmmc_unmount()</span></code></a> unmounts the filesystem and releases the resources acquired by <a class="reference internal" href="#_CPPv423esp_vfs_fat_sdmmc_mountPKcPK12sdmmc_host_tPKvPK26esp_vfs_fat_mount_config_tPP12sdmmc_card_t" title="esp_vfs_fat_sdmmc_mount"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_vfs_fat_sdmmc_mount()</span></code></a>.</p>
<dl class="function">
<dt id="_CPPv423esp_vfs_fat_sdmmc_mountPKcPK12sdmmc_host_tPKvPK26esp_vfs_fat_mount_config_tPP12sdmmc_card_t">
<span id="_CPPv323esp_vfs_fat_sdmmc_mountPKcPK12sdmmc_host_tPKvPK26esp_vfs_fat_mount_config_tPP12sdmmc_card_t"></span><span id="_CPPv223esp_vfs_fat_sdmmc_mountPKcPK12sdmmc_host_tPKvPK26esp_vfs_fat_mount_config_tPP12sdmmc_card_t"></span><span id="esp_vfs_fat_sdmmc_mount__cCP.sdmmc_host_tCP.voidCP.esp_vfs_fat_mount_config_tCP.sdmmc_card_tPP"></span><span class="target" id="esp__vfs__fat_8h_1a3765e848b78d99a925001ee41c7d3890"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t">esp_err_t</a> <code class="descname">esp_vfs_fat_sdmmc_mount</code><span class="sig-paren">(</span><em class="property">const</em> char *<em>base_path</em>, <em class="property">const</em> <a class="reference internal" href="sdmmc.html#_CPPv412sdmmc_host_t" title="sdmmc_host_t">sdmmc_host_t</a> *<em>host_config</em>, <em class="property">const</em> void *<em>slot_config</em>, <em class="property">const</em> <a class="reference internal" href="#_CPPv426esp_vfs_fat_mount_config_t" title="esp_vfs_fat_mount_config_t">esp_vfs_fat_mount_config_t</a> *<em>mount_config</em>, <a class="reference internal" href="sdmmc.html#_CPPv412sdmmc_card_t" title="sdmmc_card_t">sdmmc_card_t</a> **<em>out_card</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv423esp_vfs_fat_sdmmc_mountPKcPK12sdmmc_host_tPKvPK26esp_vfs_fat_mount_config_tPP12sdmmc_card_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Convenience function to get FAT filesystem on SD card registered in VFS. </p>
<p>This is an all-in-one function which does the following:<ul class="simple">
<li>initializes SDMMC driver or SPI driver with configuration in host_config</li>
<li>initializes SD card with configuration in slot_config</li>
<li>mounts FAT partition on SD card using FATFS library, with configuration in mount_config</li>
<li>registers FATFS library with VFS, with prefix given by base_prefix variable</li>
</ul>
</p>
<p>This function is intended to make example code more compact. For real world applications, developers should implement the logic of probing SD card, locating and mounting partition, and registering FATFS in VFS, with proper error checking and handling of exceptional conditions.</p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd><ul class="simple">
<li>ESP_OK on success</li>
<li>ESP_ERR_INVALID_STATE if esp_vfs_fat_sdmmc_mount was already called</li>
<li>ESP_ERR_NO_MEM if memory can not be allocated</li>
<li>ESP_FAIL if partition can not be mounted</li>
<li>other error codes from SDMMC or SPI drivers, SDMMC protocol, or FATFS drivers </li>
</ul>
</dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal notranslate"><span class="pre">base_path</span></code>: path where partition should be registered (e.g. “/sdcard”) </li>
<li><code class="docutils literal notranslate"><span class="pre">host_config</span></code>: Pointer to structure describing SDMMC host. When using SDMMC peripheral, this structure can be initialized using SDMMC_HOST_DEFAULT() macro. When using SPI peripheral, this structure can be initialized using SDSPI_HOST_DEFAULT() macro. </li>
<li><code class="docutils literal notranslate"><span class="pre">slot_config</span></code>: Pointer to structure with slot configuration. For SDMMC peripheral, pass a pointer to <a class="reference internal" href="../peripherals/sdmmc_host.html#structsdmmc__slot__config__t"><span class="std std-ref">sdmmc_slot_config_t</span></a> structure initialized using SDMMC_SLOT_CONFIG_DEFAULT. For SPI peripheral, pass a pointer to <a class="reference internal" href="../peripherals/sdspi_host.html#structsdspi__slot__config__t"><span class="std std-ref">sdspi_slot_config_t</span></a> structure initialized using SDSPI_SLOT_CONFIG_DEFAULT. </li>
<li><code class="docutils literal notranslate"><span class="pre">mount_config</span></code>: pointer to structure with extra parameters for mounting FATFS </li>
<li><code class="docutils literal notranslate"><span class="pre">out_card</span></code>: if not NULL, pointer to the card information structure will be returned via this argument </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="class">
<dt id="_CPPv426esp_vfs_fat_mount_config_t">
<span id="_CPPv326esp_vfs_fat_mount_config_t"></span><span id="_CPPv226esp_vfs_fat_mount_config_t"></span><span id="esp_vfs_fat_mount_config_t"></span><span class="target" id="structesp__vfs__fat__mount__config__t"></span><em class="property">struct </em><code class="descname">esp_vfs_fat_mount_config_t</code><a class="headerlink" href="#_CPPv426esp_vfs_fat_mount_config_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Configuration arguments for esp_vfs_fat_sdmmc_mount and esp_vfs_fat_spiflash_mount functions. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Public Members</p>
<dl class="member">
<dt id="_CPPv4N26esp_vfs_fat_mount_config_t22format_if_mount_failedE">
<span id="_CPPv3N26esp_vfs_fat_mount_config_t22format_if_mount_failedE"></span><span id="_CPPv2N26esp_vfs_fat_mount_config_t22format_if_mount_failedE"></span><span id="esp_vfs_fat_mount_config_t::format_if_mount_failed__b"></span><span class="target" id="structesp__vfs__fat__mount__config__t_1a00a3a5b150759860512e9d44c89232ac"></span>bool <code class="descname">format_if_mount_failed</code><a class="headerlink" href="#_CPPv4N26esp_vfs_fat_mount_config_t22format_if_mount_failedE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>If FAT partition can not be mounted, and this parameter is true, create partition table and format the filesystem. </p>
</dd></dl>

<dl class="member">
<dt id="_CPPv4N26esp_vfs_fat_mount_config_t9max_filesE">
<span id="_CPPv3N26esp_vfs_fat_mount_config_t9max_filesE"></span><span id="_CPPv2N26esp_vfs_fat_mount_config_t9max_filesE"></span><span id="esp_vfs_fat_mount_config_t::max_files__i"></span><span class="target" id="structesp__vfs__fat__mount__config__t_1a2eec236e215f9fc7cd94fb340e32f301"></span>int <code class="descname">max_files</code><a class="headerlink" href="#_CPPv4N26esp_vfs_fat_mount_config_t9max_filesE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Max number of open files. </p>
</dd></dl>

<dl class="member">
<dt id="_CPPv4N26esp_vfs_fat_mount_config_t20allocation_unit_sizeE">
<span id="_CPPv3N26esp_vfs_fat_mount_config_t20allocation_unit_sizeE"></span><span id="_CPPv2N26esp_vfs_fat_mount_config_t20allocation_unit_sizeE"></span><span id="esp_vfs_fat_mount_config_t::allocation_unit_size__s"></span><span class="target" id="structesp__vfs__fat__mount__config__t_1a015e459eb420efc8318e8de5bc15bae8"></span>size_t <code class="descname">allocation_unit_size</code><a class="headerlink" href="#_CPPv4N26esp_vfs_fat_mount_config_t20allocation_unit_sizeE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>If format_if_mount_failed is set, and mount fails, format the card with given allocation unit size. Must be a power of 2, between sector size and 128 * sector size. For SD cards, sector size is always 512 bytes. For wear_levelling, sector size is determined by CONFIG_WL_SECTOR_SIZE option.</p>
<p>Using larger allocation unit size will result in higher read/write performance and higher overhead when storing small files.</p>
<p>Setting this field to 0 will result in allocation unit set to the sector size. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="function">
<dt id="_CPPv425esp_vfs_fat_sdmmc_unmountv">
<span id="_CPPv325esp_vfs_fat_sdmmc_unmountv"></span><span id="_CPPv225esp_vfs_fat_sdmmc_unmountv"></span><span id="esp_vfs_fat_sdmmc_unmount__void"></span><span class="target" id="esp__vfs__fat_8h_1a29a29cc2e7d69d09cd82abc1fbbecb2b"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t">esp_err_t</a> <code class="descname">esp_vfs_fat_sdmmc_unmount</code><span class="sig-paren">(</span>void<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv425esp_vfs_fat_sdmmc_unmountv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Unmount FAT filesystem and release resources acquired using esp_vfs_fat_sdmmc_mount. </p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd><ul class="simple">
<li>ESP_OK on success</li>
<li>ESP_ERR_INVALID_STATE if esp_vfs_fat_sdmmc_mount hasn’t been called </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
<div class="section" id="using-fatfs-with-vfs-in-read-only-mode">
<h2>Using FatFs with VFS in read-only mode<a class="headerlink" href="#using-fatfs-with-vfs-in-read-only-mode" title="Permalink to this headline">¶</a></h2>
<p>The header file <a class="reference external" href="https://github.com/espressif/esp-idf/blob/f91080637/components/fatfs/vfs/esp_vfs_fat.h">fatfs/vfs/esp_vfs_fat.h</a> also defines the convenience functions <a class="reference internal" href="#_CPPv426esp_vfs_fat_rawflash_mountPKcPKcPK26esp_vfs_fat_mount_config_t" title="esp_vfs_fat_rawflash_mount"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_vfs_fat_rawflash_mount()</span></code></a> and <a class="reference internal" href="#_CPPv428esp_vfs_fat_rawflash_unmountPKcPKc" title="esp_vfs_fat_rawflash_unmount"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_vfs_fat_rawflash_unmount()</span></code></a>. These functions perform Steps 1-3 and 7-9 respectively for read-only FAT partitions. These are particularly helpful for data partitions written only once during factory provisioning which will not be changed by production application throughout the lifetime of the hardware.</p>
<dl class="function">
<dt id="_CPPv426esp_vfs_fat_rawflash_mountPKcPKcPK26esp_vfs_fat_mount_config_t">
<span id="_CPPv326esp_vfs_fat_rawflash_mountPKcPKcPK26esp_vfs_fat_mount_config_t"></span><span id="_CPPv226esp_vfs_fat_rawflash_mountPKcPKcPK26esp_vfs_fat_mount_config_t"></span><span id="esp_vfs_fat_rawflash_mount__cCP.cCP.esp_vfs_fat_mount_config_tCP"></span><span class="target" id="esp__vfs__fat_8h_1a3e7ce499e3421b1a98293452c6a2ba78"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t">esp_err_t</a> <code class="descname">esp_vfs_fat_rawflash_mount</code><span class="sig-paren">(</span><em class="property">const</em> char *<em>base_path</em>, <em class="property">const</em> char *<em>partition_label</em>, <em class="property">const</em> <a class="reference internal" href="#_CPPv426esp_vfs_fat_mount_config_t" title="esp_vfs_fat_mount_config_t">esp_vfs_fat_mount_config_t</a> *<em>mount_config</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv426esp_vfs_fat_rawflash_mountPKcPKcPK26esp_vfs_fat_mount_config_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Convenience function to initialize read-only FAT filesystem and register it in VFS. </p>
<p>This is an all-in-one function which does the following:</p>
<p><ul class="simple">
<li>finds the partition with defined partition_label. Partition label should be configured in the partition table.</li>
<li>mounts FAT partition using FATFS library</li>
<li>registers FATFS library with VFS, with prefix given by base_prefix variable</li>
</ul>
</p>
<p><dl class="docutils">
<dt><strong>Note</strong></dt>
<dd>Wear levelling is not used when FAT is mounted in read-only mode using this function.</dd>
<dt><strong>Return</strong></dt>
<dd><ul class="simple">
<li>ESP_OK on success</li>
<li>ESP_ERR_NOT_FOUND if the partition table does not contain FATFS partition with given label</li>
<li>ESP_ERR_INVALID_STATE if esp_vfs_fat_rawflash_mount was already called for the same partition</li>
<li>ESP_ERR_NO_MEM if memory can not be allocated</li>
<li>ESP_FAIL if partition can not be mounted</li>
<li>other error codes from SPI flash driver, or FATFS drivers </li>
</ul>
</dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal notranslate"><span class="pre">base_path</span></code>: path where FATFS partition should be mounted (e.g. “/spiflash”) </li>
<li><code class="docutils literal notranslate"><span class="pre">partition_label</span></code>: label of the partition which should be used </li>
<li><code class="docutils literal notranslate"><span class="pre">mount_config</span></code>: pointer to structure with extra parameters for mounting FATFS </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv428esp_vfs_fat_rawflash_unmountPKcPKc">
<span id="_CPPv328esp_vfs_fat_rawflash_unmountPKcPKc"></span><span id="_CPPv228esp_vfs_fat_rawflash_unmountPKcPKc"></span><span id="esp_vfs_fat_rawflash_unmount__cCP.cCP"></span><span class="target" id="esp__vfs__fat_8h_1ae5a289c59d902b8e1f23bccf90076c7a"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t">esp_err_t</a> <code class="descname">esp_vfs_fat_rawflash_unmount</code><span class="sig-paren">(</span><em class="property">const</em> char *<em>base_path</em>, <em class="property">const</em> char *<em>partition_label</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv428esp_vfs_fat_rawflash_unmountPKcPKc" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Unmount FAT filesystem and release resources acquired using esp_vfs_fat_rawflash_mount. </p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd><ul class="simple">
<li>ESP_OK on success</li>
<li>ESP_ERR_INVALID_STATE if esp_vfs_fat_spiflash_mount hasn’t been called </li>
</ul>
</dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal notranslate"><span class="pre">base_path</span></code>: path where partition should be registered (e.g. “/spiflash”) </li>
<li><code class="docutils literal notranslate"><span class="pre">partition_label</span></code>: label of partition to be unmounted</li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
<div class="section" id="fatfs-disk-io-layer">
<h2>FatFS disk IO layer<a class="headerlink" href="#fatfs-disk-io-layer" title="Permalink to this headline">¶</a></h2>
<p>FatFs has been extended with API functions that register the disk I/O driver at runtime.</p>
<p>They provide implementation of disk I/O functions for SD/MMC cards and can be registered for the given FatFs drive number using the function <a class="reference internal" href="#_CPPv424ff_diskio_register_sdmmchP12sdmmc_card_t" title="ff_diskio_register_sdmmc"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">ff_diskio_register_sdmmc()</span></code></a>.</p>
<dl class="function">
<dt id="_CPPv418ff_diskio_register4BYTEPK16ff_diskio_impl_t">
<span id="_CPPv318ff_diskio_register4BYTEPK16ff_diskio_impl_t"></span><span id="_CPPv218ff_diskio_register4BYTEPK16ff_diskio_impl_t"></span><span id="ff_diskio_register__BYTE.ff_diskio_impl_tCP"></span><span class="target" id="diskio__impl_8h_1aede394e2f813eefc9492432b93b66101"></span>void <code class="descname">ff_diskio_register</code><span class="sig-paren">(</span>BYTE <em>pdrv</em>, <em class="property">const</em> <a class="reference internal" href="#_CPPv416ff_diskio_impl_t" title="ff_diskio_impl_t">ff_diskio_impl_t</a> *<em>discio_impl</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv418ff_diskio_register4BYTEPK16ff_diskio_impl_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Register or unregister diskio driver for given drive number.</p>
<p>When FATFS library calls one of disk_xxx functions for driver number pdrv, corresponding function in discio_impl for given pdrv will be called.</p>
<p><dl class="docutils">
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal notranslate"><span class="pre">pdrv</span></code>: drive number </li>
<li><code class="docutils literal notranslate"><span class="pre">discio_impl</span></code>: pointer to <a class="reference internal" href="#structff__diskio__impl__t"><span class="std std-ref">ff_diskio_impl_t</span></a> structure with diskio functions or NULL to unregister and free previously registered drive </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="class">
<dt id="_CPPv416ff_diskio_impl_t">
<span id="_CPPv316ff_diskio_impl_t"></span><span id="_CPPv216ff_diskio_impl_t"></span><span id="ff_diskio_impl_t"></span><span class="target" id="structff__diskio__impl__t"></span><em class="property">struct </em><code class="descname">ff_diskio_impl_t</code><a class="headerlink" href="#_CPPv416ff_diskio_impl_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Structure of pointers to disk IO driver functions.</p>
<p>See FatFs documentation for details about these functions </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Public Members</p>
<dl class="member">
<dt id="_CPPv4N16ff_diskio_impl_t4initE">
<span id="_CPPv3N16ff_diskio_impl_t4initE"></span><span id="_CPPv2N16ff_diskio_impl_t4initE"></span><span class="target" id="structff__diskio__impl__t_1a1df50cb1a2e6cac7e9f1d68ec2cd7548"></span>DSTATUS (*<code class="descname">init</code>)<span class="sig-paren">(</span>unsigned char pdrv<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N16ff_diskio_impl_t4initE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>disk initialization function </p>
</dd></dl>

<dl class="member">
<dt id="_CPPv4N16ff_diskio_impl_t6statusE">
<span id="_CPPv3N16ff_diskio_impl_t6statusE"></span><span id="_CPPv2N16ff_diskio_impl_t6statusE"></span><span class="target" id="structff__diskio__impl__t_1af444e959dd792c09eba53a02423d373a"></span>DSTATUS (*<code class="descname">status</code>)<span class="sig-paren">(</span>unsigned char pdrv<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N16ff_diskio_impl_t6statusE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>disk status check function </p>
</dd></dl>

<dl class="member">
<dt id="_CPPv4N16ff_diskio_impl_t4readE">
<span id="_CPPv3N16ff_diskio_impl_t4readE"></span><span id="_CPPv2N16ff_diskio_impl_t4readE"></span><span class="target" id="structff__diskio__impl__t_1aeac3c3152aeddec72d2274ac29c73657"></span>DRESULT (*<code class="descname">read</code>)<span class="sig-paren">(</span>unsigned char pdrv, unsigned char *buff, uint32_t sector, unsigned count<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N16ff_diskio_impl_t4readE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>sector read function </p>
</dd></dl>

<dl class="member">
<dt id="_CPPv4N16ff_diskio_impl_t5writeE">
<span id="_CPPv3N16ff_diskio_impl_t5writeE"></span><span id="_CPPv2N16ff_diskio_impl_t5writeE"></span><span class="target" id="structff__diskio__impl__t_1aea971f3aa90267e2a874e998053c2c93"></span>DRESULT (*<code class="descname">write</code>)<span class="sig-paren">(</span>unsigned char pdrv, <em class="property">const</em> unsigned char *buff, uint32_t sector, unsigned count<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N16ff_diskio_impl_t5writeE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>sector write function </p>
</dd></dl>

<dl class="member">
<dt id="_CPPv4N16ff_diskio_impl_t5ioctlE">
<span id="_CPPv3N16ff_diskio_impl_t5ioctlE"></span><span id="_CPPv2N16ff_diskio_impl_t5ioctlE"></span><span class="target" id="structff__diskio__impl__t_1a6a6fba1f8fccdd56238804fb2c0ebf17"></span>DRESULT (*<code class="descname">ioctl</code>)<span class="sig-paren">(</span>unsigned char pdrv, unsigned char cmd, void *buff<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N16ff_diskio_impl_t5ioctlE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>function to get info about disk and do some misc operations </p>
</dd></dl>

</div>
</dd></dl>

<dl class="function">
<dt id="_CPPv424ff_diskio_register_sdmmchP12sdmmc_card_t">
<span id="_CPPv324ff_diskio_register_sdmmchP12sdmmc_card_t"></span><span id="_CPPv224ff_diskio_register_sdmmchP12sdmmc_card_t"></span><span id="ff_diskio_register_sdmmc__unsigned-c.sdmmc_card_tP"></span><span class="target" id="diskio__sdmmc_8h_1a2a5a7ea95bc6352e83f0dbcdfc4f8df0"></span>void <code class="descname">ff_diskio_register_sdmmc</code><span class="sig-paren">(</span>unsigned char <em>pdrv</em>, <a class="reference internal" href="sdmmc.html#_CPPv412sdmmc_card_t" title="sdmmc_card_t">sdmmc_card_t</a> *<em>card</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv424ff_diskio_register_sdmmchP12sdmmc_card_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Register SD/MMC diskio driver</p>
<p><dl class="docutils">
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal notranslate"><span class="pre">pdrv</span></code>: drive number </li>
<li><code class="docutils literal notranslate"><span class="pre">card</span></code>: pointer to <a class="reference internal" href="sdmmc.html#structsdmmc__card__t"><span class="std std-ref">sdmmc_card_t</span></a> structure describing a card; card should be initialized before calling f_mount. </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv431ff_diskio_register_wl_partitionh11wl_handle_t">
<span id="_CPPv331ff_diskio_register_wl_partitionh11wl_handle_t"></span><span id="_CPPv231ff_diskio_register_wl_partitionh11wl_handle_t"></span><span id="ff_diskio_register_wl_partition__unsigned-c.wl_handle_t"></span><span class="target" id="diskio__wl_8h_1adff902b08561e963b7cadf1187839bb3"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t">esp_err_t</a> <code class="descname">ff_diskio_register_wl_partition</code><span class="sig-paren">(</span>unsigned char <em>pdrv</em>, <a class="reference internal" href="wear-levelling.html#_CPPv411wl_handle_t" title="wl_handle_t">wl_handle_t</a> <em>flash_handle</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv431ff_diskio_register_wl_partitionh11wl_handle_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Register spi flash partition</p>
<p><dl class="docutils">
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal notranslate"><span class="pre">pdrv</span></code>: drive number </li>
<li><code class="docutils literal notranslate"><span class="pre">flash_handle</span></code>: handle of the wear levelling partition. </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv432ff_diskio_register_raw_partitionhPK15esp_partition_t">
<span id="_CPPv332ff_diskio_register_raw_partitionhPK15esp_partition_t"></span><span id="_CPPv232ff_diskio_register_raw_partitionhPK15esp_partition_t"></span><span id="ff_diskio_register_raw_partition__unsigned-c.esp_partition_tCP"></span><span class="target" id="diskio__rawflash_8h_1afbc35702232a97adabab60b1425ea7c9"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t">esp_err_t</a> <code class="descname">ff_diskio_register_raw_partition</code><span class="sig-paren">(</span>unsigned char <em>pdrv</em>, <em class="property">const</em> <a class="reference internal" href="spi_flash.html#_CPPv415esp_partition_t" title="esp_partition_t">esp_partition_t</a> *<em>part_handle</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv432ff_diskio_register_raw_partitionhPK15esp_partition_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Register spi flash partition</p>
<p><dl class="docutils">
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal notranslate"><span class="pre">pdrv</span></code>: drive number </li>
<li><code class="docutils literal notranslate"><span class="pre">part_handle</span></code>: pointer to raw flash partition. </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="mass_mfg.html" class="btn btn-neutral float-right" title="Manufacturing Utility" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral float-left" title="Storage API" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016 - 2019, Espressif Systems (Shanghai) CO., LTD
      
        <span class="commit">
          Revision <code>f9108063</code>.
        </span>
      

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org/">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Read the Docs</span>
      v: latest
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Versions</dt>
        
          <dd><a href="https://docs.espressif.com/en/latest/">latest</a></dd>
        
          <dd><a href="https://docs.espressif.com/en/stable/">stable</a></dd>
        
          <dd><a href="https://docs.espressif.com/en/v4.0-rc/">v4.0-rc</a></dd>
        
          <dd><a href="https://docs.espressif.com/en/v4.0-beta2/">v4.0-beta2</a></dd>
        
          <dd><a href="https://docs.espressif.com/en/v3.3.1/">v3.3.1</a></dd>
        
          <dd><a href="https://docs.espressif.com/en/v3.3/">v3.3</a></dd>
        
          <dd><a href="https://docs.espressif.com/en/v3.2.3/">v3.2.3</a></dd>
        
          <dd><a href="https://docs.espressif.com/en/v3.2.2/">v3.2.2</a></dd>
        
          <dd><a href="https://docs.espressif.com/en/v3.1.6/">v3.1.6</a></dd>
        
          <dd><a href="https://docs.espressif.com/en/v3.1.5/">v3.1.5</a></dd>
        
          <dd><a href="https://docs.espressif.com/en/v3.0.9/">v3.0.9</a></dd>
        
          <dd><a href="https://docs.espressif.com/en/release-v4.1/">release-v4.1</a></dd>
        
          <dd><a href="https://docs.espressif.com/en/release-v4.0/">release-v4.0</a></dd>
        
          <dd><a href="https://docs.espressif.com/en/release-v3.3/">release-v3.3</a></dd>
        
          <dd><a href="https://docs.espressif.com/en/release-v3.2/">release-v3.2</a></dd>
        
          <dd><a href="https://docs.espressif.com/en/release-v3.1/">release-v3.1</a></dd>
        
          <dd><a href="https://docs.espressif.com/en/release-v3.0/">release-v3.0</a></dd>
        
      </dl>
      <dl>
        <dt>Downloads</dt>
        
          <dd><a href="http://docs.espressif.com/_/downloads/esp-idf/en/latest/pdf/">pdf</a></dd>
        
      </dl>
      <dl>
        <dt>On Read the Docs</dt>
          <dd>
            <a href="http://readthedocs.com/projects/espressif-esp-idf/?fromdocs=espressif-esp-idf">Project Home</a>
          </dd>
          <dd>
            <a href="http://readthedocs.com/builds/espressif-esp-idf/?fromdocs=espressif-esp-idf">Builds</a>
          </dd>
      </dl>
      <hr/>
      Free document hosting provided by <a href="http://www.readthedocs.org/">Read the Docs</a>.

    </div>
  </div>



  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
   

</body>

<!-- Mirrored from docs.espressif.com/projects/esp-idf/en/latest/api-reference/storage/fatfs.html by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 29 Feb 2020 06:26:27 GMT -->
</html>