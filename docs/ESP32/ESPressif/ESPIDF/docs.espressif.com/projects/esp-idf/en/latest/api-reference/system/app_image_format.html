

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->

<!-- Mirrored from docs.espressif.com/projects/esp-idf/en/latest/api-reference/system/app_image_format.html by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 29 Feb 2020 06:26:11 GMT -->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>App Image Format &mdash; ESP-IDF Programming Guide v4.1-dev-2071-gf91080637 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
        <script type="text/javascript" src="../../../../../../../media.readthedocs.com/javascript/readthedocs-doc-embed.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/theme_overrides.css" type="text/css" />
    <link rel="author" title="About these documents" href="../../about.html" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Application Level Tracing" href="app_trace.html" />
    <link rel="prev" title="System API" href="index.html" /> 

<!-- RTD Extra Head -->

<!-- 
Always link to the latest version, as canonical.
http://docs.readthedocs.org/en/latest/canonical.html
-->
<link rel="canonical" href="app_image_format.html" />

<link rel="stylesheet" href="../../../../../../../media.readthedocs.com/css/readthedocs-doc-embed.css" type="text/css" />

<script type="text/javascript" src="../../_static/readthedocs-data.js"></script>

<!-- Add page-specific data, which must exist in the page js, not global -->
<script type="text/javascript">
READTHEDOCS_DATA['page'] = "api-reference/system/app_image_format"
READTHEDOCS_DATA['source_suffix'] = ".rst"
</script>

<script type="text/javascript" src="../../../../../../../media.readthedocs.com/javascript/readthedocs-analytics.js"></script>

<!-- end RTD <extrahead> -->
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index-2.html" class="icon icon-home"> ESP-IDF Programming Guide
          

          
            
            <img src="../../_static/espressif-logo.svg" class="logo" alt="Logo"/>
          
          </a>

          
            
            
            
              <div class="version">
                latest
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="https://docs.espressif.com/projects/esp-idf/en/latest/search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../get-started/index.html">Get Started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">API Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../bluetooth/index.html">Bluetooth</a></li>
<li class="toctree-l2"><a class="reference internal" href="../network/index.html">Networking</a></li>
<li class="toctree-l2"><a class="reference internal" href="../peripherals/index.html">Peripherals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../protocols/index.html">Protocols</a></li>
<li class="toctree-l2"><a class="reference internal" href="../provisioning/index.html">Provisioning</a></li>
<li class="toctree-l2"><a class="reference internal" href="../storage/index.html">Storage</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">System</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">App image format</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#application-description">Application Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="#adding-a-custom-structure-to-an-application">Adding a Custom Structure to an Application</a></li>
<li class="toctree-l4"><a class="reference internal" href="#api-reference">API Reference</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="app_trace.html">Application Level Tracing</a></li>
<li class="toctree-l3"><a class="reference internal" href="efuse.html">eFuse Manager</a></li>
<li class="toctree-l3"><a class="reference internal" href="esp_err.html">Error Codes and Helper Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="esp_https_ota.html">ESP HTTPS OTA</a></li>
<li class="toctree-l3"><a class="reference internal" href="esp_pthread.html">ESP pthread</a></li>
<li class="toctree-l3"><a class="reference internal" href="esp_event.html">Event Loop Library</a></li>
<li class="toctree-l3"><a class="reference internal" href="freertos.html">FreeRTOS</a></li>
<li class="toctree-l3"><a class="reference internal" href="freertos_additions.html">FreeRTOS Additions</a></li>
<li class="toctree-l3"><a class="reference internal" href="mem_alloc.html">Heap Memory Allocation</a></li>
<li class="toctree-l3"><a class="reference internal" href="heap_debug.html">Heap Memory Debugging</a></li>
<li class="toctree-l3"><a class="reference internal" href="esp_timer.html">High Resolution Timer</a></li>
<li class="toctree-l3"><a class="reference internal" href="himem.html">Himem (large external SPI RAM) API</a></li>
<li class="toctree-l3"><a class="reference internal" href="ipc.html">Inter-Processor Call</a></li>
<li class="toctree-l3"><a class="reference internal" href="esp_expression_with_stack.html">Call function with external stack</a></li>
<li class="toctree-l3"><a class="reference internal" href="intr_alloc.html">Interrupt Allocation</a></li>
<li class="toctree-l3"><a class="reference internal" href="log.html">Logging</a></li>
<li class="toctree-l3"><a class="reference internal" href="system.html">Miscellaneous System APIs</a></li>
<li class="toctree-l3"><a class="reference internal" href="ota.html">Over The Air Updates (OTA)</a></li>
<li class="toctree-l3"><a class="reference internal" href="perfmon.html">Performance Monitor</a></li>
<li class="toctree-l3"><a class="reference internal" href="power_management.html">Power Management</a></li>
<li class="toctree-l3"><a class="reference internal" href="sleep_modes.html">Sleep Modes</a></li>
<li class="toctree-l3"><a class="reference internal" href="wdts.html">Watchdogs</a></li>
<li class="toctree-l3"><a class="reference internal" href="system_time.html">System Time</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../kconfig.html">Configuration Options</a></li>
<li class="toctree-l2"><a class="reference internal" href="../error-codes.html">Error Codes Reference</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../hw-reference/index.html">H/W Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../esp32s2.html">ESP32-S2 Preview Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api-guides/index.html">API Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../libraries-and-frameworks/index.html">Libraries and Frameworks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contribute/index.html">Contribute</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../versions.html">Versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../resources.html">Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../COPYRIGHT.html">Copyrights</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../about.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../languages.html">语言/Languages</a></li>
<li class="toctree-l1"><a class="reference external" href="https://readthedocs.com/projects/espressif-esp-idf/downloads/">Guide Downloads</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index-2.html">ESP-IDF Programming Guide</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index-2.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">API Reference</a> &raquo;</li>
        
          <li><a href="index.html">System API</a> &raquo;</li>
        
      <li>App Image Format</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/espressif/esp-idf/blob/master/docs/en/api-reference/system/app_image_format.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="app-image-format">
<h1>App Image Format<a class="headerlink" href="#app-image-format" title="Permalink to this headline">¶</a></h1>
<p>An application image consists of the following structures:</p>
<ol class="arabic simple">
<li>The <a class="reference internal" href="#_CPPv418esp_image_header_t" title="esp_image_header_t"><code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">esp_image_header_t</span></code></a> structure describes the mode of SPI flash and the count of memory segments.</li>
<li>The <a class="reference internal" href="#_CPPv426esp_image_segment_header_t" title="esp_image_segment_header_t"><code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">esp_image_segment_header_t</span></code></a> structure describes each segment, its length, and its location in ESP32’s memory, followed by the data with a length of <code class="docutils literal notranslate"><span class="pre">data_len</span></code>. The data offset for each segment in the image is calculated in the following way:</li>
</ol>
<blockquote>
<div><ul class="simple">
<li>offset for 0 Segment = sizeof(<a class="reference internal" href="#_CPPv418esp_image_header_t" title="esp_image_header_t"><code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">esp_image_header_t</span></code></a>) + sizeof(<a class="reference internal" href="#_CPPv426esp_image_segment_header_t" title="esp_image_segment_header_t"><code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">esp_image_segment_header_t</span></code></a>).</li>
<li>offset for 1 Segment = offset for 0 Segment + length of 0 Segment + sizeof(<a class="reference internal" href="#_CPPv426esp_image_segment_header_t" title="esp_image_segment_header_t"><code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">esp_image_segment_header_t</span></code></a>).</li>
<li>offset for 2 Segment = offset for 1 Segment + length of 1 Segment + sizeof(<a class="reference internal" href="#_CPPv426esp_image_segment_header_t" title="esp_image_segment_header_t"><code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">esp_image_segment_header_t</span></code></a>).</li>
<li>…</li>
</ul>
</div></blockquote>
<p>The count of each segment is defined in the <code class="docutils literal notranslate"><span class="pre">segment_count</span></code> field that is stored in <a class="reference internal" href="#_CPPv418esp_image_header_t" title="esp_image_header_t"><code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">esp_image_header_t</span></code></a>. The count cannot be more than <code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">ESP_IMAGE_MAX_SEGMENTS</span></code>.</p>
<p>To get the list of your image segments, please run the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">esptool</span><span class="o">.</span><span class="n">py</span> <span class="o">--</span><span class="n">chip</span> <span class="n">esp32</span> <span class="n">image_info</span> <span class="n">build</span><span class="o">/</span><span class="n">app</span><span class="o">.</span><span class="n">bin</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">esptool</span><span class="o">.</span><span class="n">py</span> <span class="n">v2</span><span class="o">.</span><span class="mf">3.1</span>
<span class="n">Image</span> <span class="n">version</span><span class="p">:</span> <span class="mi">1</span>
<span class="n">Entry</span> <span class="n">point</span><span class="p">:</span> <span class="mi">40080</span><span class="n">ea4</span>
<span class="mi">13</span> <span class="n">segments</span>
<span class="n">Segment</span> <span class="mi">1</span><span class="p">:</span> <span class="nb">len</span> <span class="mh">0x13ce0</span> <span class="n">load</span> <span class="mh">0x3f400020</span> <span class="n">file_offs</span> <span class="mh">0x00000018</span> <span class="n">SOC_DROM</span>
<span class="n">Segment</span> <span class="mi">2</span><span class="p">:</span> <span class="nb">len</span> <span class="mh">0x00000</span> <span class="n">load</span> <span class="mh">0x3ff80000</span> <span class="n">file_offs</span> <span class="mh">0x00013d00</span> <span class="n">SOC_RTC_DRAM</span>
<span class="n">Segment</span> <span class="mi">3</span><span class="p">:</span> <span class="nb">len</span> <span class="mh">0x00000</span> <span class="n">load</span> <span class="mh">0x3ff80000</span> <span class="n">file_offs</span> <span class="mh">0x00013d08</span> <span class="n">SOC_RTC_DRAM</span>
<span class="n">Segment</span> <span class="mi">4</span><span class="p">:</span> <span class="nb">len</span> <span class="mh">0x028e0</span> <span class="n">load</span> <span class="mh">0x3ffb0000</span> <span class="n">file_offs</span> <span class="mh">0x00013d10</span> <span class="n">DRAM</span>
<span class="n">Segment</span> <span class="mi">5</span><span class="p">:</span> <span class="nb">len</span> <span class="mh">0x00000</span> <span class="n">load</span> <span class="mh">0x3ffb28e0</span> <span class="n">file_offs</span> <span class="mh">0x000165f8</span> <span class="n">DRAM</span>
<span class="n">Segment</span> <span class="mi">6</span><span class="p">:</span> <span class="nb">len</span> <span class="mh">0x00400</span> <span class="n">load</span> <span class="mh">0x40080000</span> <span class="n">file_offs</span> <span class="mh">0x00016600</span> <span class="n">SOC_IRAM</span>
<span class="n">Segment</span> <span class="mi">7</span><span class="p">:</span> <span class="nb">len</span> <span class="mh">0x09600</span> <span class="n">load</span> <span class="mh">0x40080400</span> <span class="n">file_offs</span> <span class="mh">0x00016a08</span> <span class="n">SOC_IRAM</span>
<span class="n">Segment</span> <span class="mi">8</span><span class="p">:</span> <span class="nb">len</span> <span class="mh">0x62e4c</span> <span class="n">load</span> <span class="mh">0x400d0018</span> <span class="n">file_offs</span> <span class="mh">0x00020010</span> <span class="n">SOC_IROM</span>
<span class="n">Segment</span> <span class="mi">9</span><span class="p">:</span> <span class="nb">len</span> <span class="mh">0x06cec</span> <span class="n">load</span> <span class="mh">0x40089a00</span> <span class="n">file_offs</span> <span class="mh">0x00082e64</span> <span class="n">SOC_IROM</span>
<span class="n">Segment</span> <span class="mi">10</span><span class="p">:</span> <span class="nb">len</span> <span class="mh">0x00000</span> <span class="n">load</span> <span class="mh">0x400c0000</span> <span class="n">file_offs</span> <span class="mh">0x00089b58</span> <span class="n">SOC_RTC_IRAM</span>
<span class="n">Segment</span> <span class="mi">11</span><span class="p">:</span> <span class="nb">len</span> <span class="mh">0x00004</span> <span class="n">load</span> <span class="mh">0x50000000</span> <span class="n">file_offs</span> <span class="mh">0x00089b60</span> <span class="n">SOC_RTC_DATA</span>
<span class="n">Segment</span> <span class="mi">12</span><span class="p">:</span> <span class="nb">len</span> <span class="mh">0x00000</span> <span class="n">load</span> <span class="mh">0x50000004</span> <span class="n">file_offs</span> <span class="mh">0x00089b6c</span> <span class="n">SOC_RTC_DATA</span>
<span class="n">Segment</span> <span class="mi">13</span><span class="p">:</span> <span class="nb">len</span> <span class="mh">0x00000</span> <span class="n">load</span> <span class="mh">0x50000004</span> <span class="n">file_offs</span> <span class="mh">0x00089b74</span> <span class="n">SOC_RTC_DATA</span>
<span class="n">Checksum</span><span class="p">:</span> <span class="n">e8</span> <span class="p">(</span><span class="n">valid</span><span class="p">)</span><span class="n">Validation</span> <span class="n">Hash</span><span class="p">:</span> <span class="mi">407089</span><span class="n">ca0eae2bbf83b4120979d3354b1c938a49cb7a0c997f240474ef2ec76b</span> <span class="p">(</span><span class="n">valid</span><span class="p">)</span>
</pre></div>
</div>
<p>You can also see the information on segments in the IDF logs while your application is booting:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">I</span> <span class="p">(</span><span class="mi">443</span><span class="p">)</span> <span class="n">esp_image</span><span class="p">:</span> <span class="n">segment</span> <span class="mi">0</span><span class="p">:</span> <span class="n">paddr</span><span class="o">=</span><span class="mh">0x00020020</span> <span class="n">vaddr</span><span class="o">=</span><span class="mh">0x3f400020</span> <span class="n">size</span><span class="o">=</span><span class="mh">0x13ce0</span> <span class="p">(</span> <span class="mi">81120</span><span class="p">)</span> <span class="nb">map</span>
<span class="n">I</span> <span class="p">(</span><span class="mi">489</span><span class="p">)</span> <span class="n">esp_image</span><span class="p">:</span> <span class="n">segment</span> <span class="mi">1</span><span class="p">:</span> <span class="n">paddr</span><span class="o">=</span><span class="mh">0x00033d08</span> <span class="n">vaddr</span><span class="o">=</span><span class="mh">0x3ff80000</span> <span class="n">size</span><span class="o">=</span><span class="mh">0x00000</span> <span class="p">(</span> <span class="mi">0</span><span class="p">)</span> <span class="n">load</span>
<span class="n">I</span> <span class="p">(</span><span class="mi">530</span><span class="p">)</span> <span class="n">esp_image</span><span class="p">:</span> <span class="n">segment</span> <span class="mi">2</span><span class="p">:</span> <span class="n">paddr</span><span class="o">=</span><span class="mh">0x00033d10</span> <span class="n">vaddr</span><span class="o">=</span><span class="mh">0x3ff80000</span> <span class="n">size</span><span class="o">=</span><span class="mh">0x00000</span> <span class="p">(</span> <span class="mi">0</span><span class="p">)</span> <span class="n">load</span>
<span class="n">I</span> <span class="p">(</span><span class="mi">571</span><span class="p">)</span> <span class="n">esp_image</span><span class="p">:</span> <span class="n">segment</span> <span class="mi">3</span><span class="p">:</span> <span class="n">paddr</span><span class="o">=</span><span class="mh">0x00033d18</span> <span class="n">vaddr</span><span class="o">=</span><span class="mh">0x3ffb0000</span> <span class="n">size</span><span class="o">=</span><span class="mh">0x028e0</span> <span class="p">(</span> <span class="mi">10464</span><span class="p">)</span> <span class="n">load</span>
<span class="n">I</span> <span class="p">(</span><span class="mi">612</span><span class="p">)</span> <span class="n">esp_image</span><span class="p">:</span> <span class="n">segment</span> <span class="mi">4</span><span class="p">:</span> <span class="n">paddr</span><span class="o">=</span><span class="mh">0x00036600</span> <span class="n">vaddr</span><span class="o">=</span><span class="mh">0x3ffb28e0</span> <span class="n">size</span><span class="o">=</span><span class="mh">0x00000</span> <span class="p">(</span> <span class="mi">0</span><span class="p">)</span> <span class="n">load</span>
<span class="n">I</span> <span class="p">(</span><span class="mi">654</span><span class="p">)</span> <span class="n">esp_image</span><span class="p">:</span> <span class="n">segment</span> <span class="mi">5</span><span class="p">:</span> <span class="n">paddr</span><span class="o">=</span><span class="mh">0x00036608</span> <span class="n">vaddr</span><span class="o">=</span><span class="mh">0x40080000</span> <span class="n">size</span><span class="o">=</span><span class="mh">0x00400</span> <span class="p">(</span> <span class="mi">1024</span><span class="p">)</span> <span class="n">load</span>
<span class="n">I</span> <span class="p">(</span><span class="mi">695</span><span class="p">)</span> <span class="n">esp_image</span><span class="p">:</span> <span class="n">segment</span> <span class="mi">6</span><span class="p">:</span> <span class="n">paddr</span><span class="o">=</span><span class="mh">0x00036a10</span> <span class="n">vaddr</span><span class="o">=</span><span class="mh">0x40080400</span> <span class="n">size</span><span class="o">=</span><span class="mh">0x09600</span> <span class="p">(</span> <span class="mi">38400</span><span class="p">)</span> <span class="n">load</span>
<span class="n">I</span> <span class="p">(</span><span class="mi">737</span><span class="p">)</span> <span class="n">esp_image</span><span class="p">:</span> <span class="n">segment</span> <span class="mi">7</span><span class="p">:</span> <span class="n">paddr</span><span class="o">=</span><span class="mh">0x00040018</span> <span class="n">vaddr</span><span class="o">=</span><span class="mh">0x400d0018</span> <span class="n">size</span><span class="o">=</span><span class="mh">0x62e4c</span> <span class="p">(</span><span class="mi">405068</span><span class="p">)</span> <span class="nb">map</span>
<span class="n">I</span> <span class="p">(</span><span class="mi">847</span><span class="p">)</span> <span class="n">esp_image</span><span class="p">:</span> <span class="n">segment</span> <span class="mi">8</span><span class="p">:</span> <span class="n">paddr</span><span class="o">=</span><span class="mh">0x000a2e6c</span> <span class="n">vaddr</span><span class="o">=</span><span class="mh">0x40089a00</span> <span class="n">size</span><span class="o">=</span><span class="mh">0x06cec</span> <span class="p">(</span> <span class="mi">27884</span><span class="p">)</span> <span class="n">load</span>
<span class="n">I</span> <span class="p">(</span><span class="mi">888</span><span class="p">)</span> <span class="n">esp_image</span><span class="p">:</span> <span class="n">segment</span> <span class="mi">9</span><span class="p">:</span> <span class="n">paddr</span><span class="o">=</span><span class="mh">0x000a9b60</span> <span class="n">vaddr</span><span class="o">=</span><span class="mh">0x400c0000</span> <span class="n">size</span><span class="o">=</span><span class="mh">0x00000</span> <span class="p">(</span> <span class="mi">0</span><span class="p">)</span> <span class="n">load</span>
<span class="n">I</span> <span class="p">(</span><span class="mi">929</span><span class="p">)</span> <span class="n">esp_image</span><span class="p">:</span> <span class="n">segment</span> <span class="mi">10</span><span class="p">:</span> <span class="n">paddr</span><span class="o">=</span><span class="mh">0x000a9b68</span> <span class="n">vaddr</span><span class="o">=</span><span class="mh">0x50000000</span> <span class="n">size</span><span class="o">=</span><span class="mh">0x00004</span> <span class="p">(</span> <span class="mi">4</span><span class="p">)</span> <span class="n">load</span>
<span class="n">I</span> <span class="p">(</span><span class="mi">971</span><span class="p">)</span> <span class="n">esp_image</span><span class="p">:</span> <span class="n">segment</span> <span class="mi">11</span><span class="p">:</span> <span class="n">paddr</span><span class="o">=</span><span class="mh">0x000a9b74</span> <span class="n">vaddr</span><span class="o">=</span><span class="mh">0x50000004</span> <span class="n">size</span><span class="o">=</span><span class="mh">0x00000</span> <span class="p">(</span> <span class="mi">0</span><span class="p">)</span> <span class="n">load</span>
<span class="n">I</span> <span class="p">(</span><span class="mi">1012</span><span class="p">)</span> <span class="n">esp_image</span><span class="p">:</span> <span class="n">segment</span> <span class="mi">12</span><span class="p">:</span> <span class="n">paddr</span><span class="o">=</span><span class="mh">0x000a9b7c</span> <span class="n">vaddr</span><span class="o">=</span><span class="mh">0x50000004</span> <span class="n">size</span><span class="o">=</span><span class="mh">0x00000</span> <span class="p">(</span> <span class="mi">0</span><span class="p">)</span> <span class="n">load</span>
</pre></div>
</div>
<p>For more details on the type of memory segments and their address ranges, see the ESP32 Technical Reference Manual, Section 1.3.2 <em>Embedded Memory</em>.</p>
<ol class="arabic simple" start="3">
<li>The image has a single checksum byte after the last segment. This byte is written on a sixteen byte padded boundary, so the application image might need padding.</li>
<li>If the <code class="docutils literal notranslate"><span class="pre">hash_appended</span></code> field from <a class="reference internal" href="#_CPPv418esp_image_header_t" title="esp_image_header_t"><code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">esp_image_header_t</span></code></a> is set then a SHA256 checksum will be appended. The value of SHA256 is calculated on the range from first byte and up to this field. The length of this field is 32 bytes.</li>
<li>If the options <a class="reference internal" href="../kconfig.html#config-secure-signed-apps-no-secure-boot"><span class="std std-ref">CONFIG_SECURE_SIGNED_APPS_NO_SECURE_BOOT</span></a> or <a class="reference internal" href="../kconfig.html#config-secure-boot-enabled"><span class="std std-ref">CONFIG_SECURE_BOOT_ENABLED</span></a> are enabled then the application image will have additional 68 bytes for an ECDSA signature, which includes:</li>
</ol>
<blockquote>
<div><ul class="simple">
<li>version word (4 bytes),</li>
<li>signature data (64 bytes).</li>
</ul>
</div></blockquote>
<div class="section" id="application-description">
<h2>Application Description<a class="headerlink" href="#application-description" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">DROM</span></code> segment starts with the <a class="reference internal" href="#_CPPv414esp_app_desc_t" title="esp_app_desc_t"><code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">esp_app_desc_t</span></code></a> structure which carries specific fields describing the application:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">secure_version</span></code> - see <a class="reference internal" href="ota.html"><span class="doc">Anti-rollback</span></a>.</li>
<li><code class="docutils literal notranslate"><span class="pre">version</span></code> - see <a class="reference internal" href="system.html"><span class="doc">App version</span></a>. <code class="docutils literal notranslate"><span class="pre">*</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">project_name</span></code> is filled from <code class="docutils literal notranslate"><span class="pre">PROJECT_NAME</span></code>. <code class="docutils literal notranslate"><span class="pre">*</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">time</span></code> and <code class="docutils literal notranslate"><span class="pre">date</span></code> - compile time and date.</li>
<li><code class="docutils literal notranslate"><span class="pre">idf_ver</span></code> - version of ESP-IDF. <code class="docutils literal notranslate"><span class="pre">*</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">app_elf_sha256</span></code> - contains sha256 for the elf application file.</li>
</ul>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">*</span></code> - The maximum length is 32 characters, including null-termination character. For example, if the length of <code class="docutils literal notranslate"><span class="pre">PROJECT_NAME</span></code> exceeds 32 characters, the excess characters will be disregarded.</p>
<p>This structure is useful for identification of images uploaded OTA because it has a fixed offset = sizeof(<a class="reference internal" href="#_CPPv418esp_image_header_t" title="esp_image_header_t"><code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">esp_image_header_t</span></code></a>) + sizeof(<a class="reference internal" href="#_CPPv426esp_image_segment_header_t" title="esp_image_segment_header_t"><code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">esp_image_segment_header_t</span></code></a>). As soon as a device receives the first fragment containing this structure, it has all the information to determine whether the update should be continued or not.</p>
</div>
<div class="section" id="adding-a-custom-structure-to-an-application">
<h2>Adding a Custom Structure to an Application<a class="headerlink" href="#adding-a-custom-structure-to-an-application" title="Permalink to this headline">¶</a></h2>
<p>Customer also has the opportunity to have similar structure with a fixed offset relative to the beginning of the image.
The following pattern can be used to add a custom structure to your image:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">const</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">section</span><span class="p">(</span><span class="s2">&quot;.rodata_custom_desc&quot;</span><span class="p">)))</span> <span class="n">esp_custom_app_desc_t</span> <span class="n">custom_app_desc</span> <span class="o">=</span> <span class="p">{</span> <span class="o">...</span> <span class="p">}</span>
</pre></div>
</div>
<p>Offset for custom structure is sizeof(<a class="reference internal" href="#_CPPv418esp_image_header_t" title="esp_image_header_t"><code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">esp_image_header_t</span></code></a>) + sizeof(<a class="reference internal" href="#_CPPv426esp_image_segment_header_t" title="esp_image_segment_header_t"><code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">esp_image_segment_header_t</span></code></a>) + sizeof(<a class="reference internal" href="#_CPPv414esp_app_desc_t" title="esp_app_desc_t"><code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">esp_app_desc_t</span></code></a>).</p>
<p>To guarantee that the custom structure is located in the image even if it is not used, you need to add:</p>
<blockquote>
<div><ul class="simple">
<li>For Make: add <code class="docutils literal notranslate"><span class="pre">COMPONENT_ADD_LDFLAGS</span> <span class="pre">+=</span> <span class="pre">-u</span> <span class="pre">custom_app_desc</span></code> into <code class="docutils literal notranslate"><span class="pre">component.mk</span></code></li>
<li>For Cmake: add <code class="docutils literal notranslate"><span class="pre">target_link_libraries(${COMPONENT_TARGET}</span> <span class="pre">&quot;-u</span> <span class="pre">custom_app_desc&quot;)</span></code> into <code class="docutils literal notranslate"><span class="pre">CMakeLists.txt</span></code></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="api-reference">
<h2>API Reference<a class="headerlink" href="#api-reference" title="Permalink to this headline">¶</a></h2>
<div class="section" id="header-file">
<h3>Header File<a class="headerlink" href="#header-file" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference external" href="https://github.com/espressif/esp-idf/blob/f91080637/components/bootloader_support/include/esp_app_format.h">bootloader_support/include/esp_app_format.h</a></li>
</ul>
</div>
<div class="section" id="structures">
<h3>Structures<a class="headerlink" href="#structures" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="_CPPv418esp_image_header_t">
<span id="_CPPv318esp_image_header_t"></span><span id="_CPPv218esp_image_header_t"></span><span id="esp_image_header_t"></span><span class="target" id="structesp__image__header__t"></span><em class="property">struct </em><code class="descname">esp_image_header_t</code><a class="headerlink" href="#_CPPv418esp_image_header_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Main header of binary image. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Public Members</p>
<dl class="member">
<dt id="_CPPv4N18esp_image_header_t5magicE">
<span id="_CPPv3N18esp_image_header_t5magicE"></span><span id="_CPPv2N18esp_image_header_t5magicE"></span><span id="esp_image_header_t::magic__uint8_t"></span><span class="target" id="structesp__image__header__t_1a6e86ce2b5270807e1f07bb491011f640"></span>uint8_t <code class="descname">magic</code><a class="headerlink" href="#_CPPv4N18esp_image_header_t5magicE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Magic word ESP_IMAGE_HEADER_MAGIC </p>
</dd></dl>

<dl class="member">
<dt id="_CPPv4N18esp_image_header_t13segment_countE">
<span id="_CPPv3N18esp_image_header_t13segment_countE"></span><span id="_CPPv2N18esp_image_header_t13segment_countE"></span><span id="esp_image_header_t::segment_count__uint8_t"></span><span class="target" id="structesp__image__header__t_1a99c73ccba6eafee80b779cd9850859ed"></span>uint8_t <code class="descname">segment_count</code><a class="headerlink" href="#_CPPv4N18esp_image_header_t13segment_countE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Count of memory segments </p>
</dd></dl>

<dl class="member">
<dt id="_CPPv4N18esp_image_header_t8spi_modeE">
<span id="_CPPv3N18esp_image_header_t8spi_modeE"></span><span id="_CPPv2N18esp_image_header_t8spi_modeE"></span><span id="esp_image_header_t::spi_mode__uint8_t"></span><span class="target" id="structesp__image__header__t_1a0796675f7219bb7423c360588a275d82"></span>uint8_t <code class="descname">spi_mode</code><a class="headerlink" href="#_CPPv4N18esp_image_header_t8spi_modeE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>flash read mode (esp_image_spi_mode_t as uint8_t) </p>
</dd></dl>

<dl class="member">
<dt id="_CPPv4N18esp_image_header_t9spi_speedE">
<span id="_CPPv3N18esp_image_header_t9spi_speedE"></span><span id="_CPPv2N18esp_image_header_t9spi_speedE"></span><span id="esp_image_header_t::spi_speed__uint8_t"></span><span class="target" id="structesp__image__header__t_1a2b805728b2759bf5925f61b09fc68a24"></span>uint8_t <code class="descname">spi_speed</code><a class="headerlink" href="#_CPPv4N18esp_image_header_t9spi_speedE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>flash frequency (esp_image_spi_freq_t as uint8_t) </p>
</dd></dl>

<dl class="member">
<dt id="_CPPv4N18esp_image_header_t8spi_sizeE">
<span id="_CPPv3N18esp_image_header_t8spi_sizeE"></span><span id="_CPPv2N18esp_image_header_t8spi_sizeE"></span><span id="esp_image_header_t::spi_size__uint8_t"></span><span class="target" id="structesp__image__header__t_1a4003a38b9328e247dfdb7478d9def152"></span>uint8_t <code class="descname">spi_size</code><a class="headerlink" href="#_CPPv4N18esp_image_header_t8spi_sizeE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>flash chip size (esp_image_flash_size_t as uint8_t) </p>
</dd></dl>

<dl class="member">
<dt id="_CPPv4N18esp_image_header_t10entry_addrE">
<span id="_CPPv3N18esp_image_header_t10entry_addrE"></span><span id="_CPPv2N18esp_image_header_t10entry_addrE"></span><span id="esp_image_header_t::entry_addr__uint32_t"></span><span class="target" id="structesp__image__header__t_1a6870ed1650d71bd93a5a0b5b0b688907"></span>uint32_t <code class="descname">entry_addr</code><a class="headerlink" href="#_CPPv4N18esp_image_header_t10entry_addrE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Entry address </p>
</dd></dl>

<dl class="member">
<dt id="_CPPv4N18esp_image_header_t6wp_pinE">
<span id="_CPPv3N18esp_image_header_t6wp_pinE"></span><span id="_CPPv2N18esp_image_header_t6wp_pinE"></span><span id="esp_image_header_t::wp_pin__uint8_t"></span><span class="target" id="structesp__image__header__t_1a9a232c7067a883b3fdb55b5cf3a1427a"></span>uint8_t <code class="descname">wp_pin</code><a class="headerlink" href="#_CPPv4N18esp_image_header_t6wp_pinE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>WP pin when SPI pins set via efuse (read by ROM bootloader, the IDF bootloader uses software to configure the WP pin and sets this field to 0xEE=disabled) </p>
</dd></dl>

<dl class="member">
<dt id="_CPPv4N18esp_image_header_t11spi_pin_drvE">
<span id="_CPPv3N18esp_image_header_t11spi_pin_drvE"></span><span id="_CPPv2N18esp_image_header_t11spi_pin_drvE"></span><span id="esp_image_header_t::spi_pin_drv__uint8_tA"></span><span class="target" id="structesp__image__header__t_1a6764abda8e64205b3792aaa3ab0eb43d"></span>uint8_t <code class="descname">spi_pin_drv</code>[3]<a class="headerlink" href="#_CPPv4N18esp_image_header_t11spi_pin_drvE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Drive settings for the SPI flash pins (read by ROM bootloader) </p>
</dd></dl>

<dl class="member">
<dt id="_CPPv4N18esp_image_header_t7chip_idE">
<span id="_CPPv3N18esp_image_header_t7chip_idE"></span><span id="_CPPv2N18esp_image_header_t7chip_idE"></span><span id="esp_image_header_t::chip_id__esp_chip_id_t"></span><span class="target" id="structesp__image__header__t_1ab45625634d558f93c740cc9ed963f14b"></span><a class="reference internal" href="#_CPPv413esp_chip_id_t" title="esp_chip_id_t">esp_chip_id_t</a> <code class="descname">chip_id</code><a class="headerlink" href="#_CPPv4N18esp_image_header_t7chip_idE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Chip identification number </p>
</dd></dl>

<dl class="member">
<dt id="_CPPv4N18esp_image_header_t12min_chip_revE">
<span id="_CPPv3N18esp_image_header_t12min_chip_revE"></span><span id="_CPPv2N18esp_image_header_t12min_chip_revE"></span><span id="esp_image_header_t::min_chip_rev__uint8_t"></span><span class="target" id="structesp__image__header__t_1a8cb1db2de5c6839ef9991232182fd557"></span>uint8_t <code class="descname">min_chip_rev</code><a class="headerlink" href="#_CPPv4N18esp_image_header_t12min_chip_revE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Minimum chip revision supported by image </p>
</dd></dl>

<dl class="member">
<dt id="_CPPv4N18esp_image_header_t8reservedE">
<span id="_CPPv3N18esp_image_header_t8reservedE"></span><span id="_CPPv2N18esp_image_header_t8reservedE"></span><span id="esp_image_header_t::reserved__uint8_tA"></span><span class="target" id="structesp__image__header__t_1a3d32c01282417b16f0380243048a96c0"></span>uint8_t <code class="descname">reserved</code>[8]<a class="headerlink" href="#_CPPv4N18esp_image_header_t8reservedE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Reserved bytes in additional header space, currently unused </p>
</dd></dl>

<dl class="member">
<dt id="_CPPv4N18esp_image_header_t13hash_appendedE">
<span id="_CPPv3N18esp_image_header_t13hash_appendedE"></span><span id="_CPPv2N18esp_image_header_t13hash_appendedE"></span><span id="esp_image_header_t::hash_appended__uint8_t"></span><span class="target" id="structesp__image__header__t_1a8dd3479541a5e44d805ebdeb330878e6"></span>uint8_t <code class="descname">hash_appended</code><a class="headerlink" href="#_CPPv4N18esp_image_header_t13hash_appendedE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>If 1, a SHA256 digest “simple hash” (of the entire image) is appended after the checksum. Included in image length. This digest is separate to secure boot and only used for detecting corruption. For secure boot signed images, the signature is appended after this (and the simple hash is included in the signed data). </p>
</dd></dl>

</div>
</dd></dl>

<dl class="class">
<dt id="_CPPv426esp_image_segment_header_t">
<span id="_CPPv326esp_image_segment_header_t"></span><span id="_CPPv226esp_image_segment_header_t"></span><span id="esp_image_segment_header_t"></span><span class="target" id="structesp__image__segment__header__t"></span><em class="property">struct </em><code class="descname">esp_image_segment_header_t</code><a class="headerlink" href="#_CPPv426esp_image_segment_header_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Header of binary image segment. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Public Members</p>
<dl class="member">
<dt id="_CPPv4N26esp_image_segment_header_t9load_addrE">
<span id="_CPPv3N26esp_image_segment_header_t9load_addrE"></span><span id="_CPPv2N26esp_image_segment_header_t9load_addrE"></span><span id="esp_image_segment_header_t::load_addr__uint32_t"></span><span class="target" id="structesp__image__segment__header__t_1a9b2c8bd544b6743d38d93351fa3c9e4b"></span>uint32_t <code class="descname">load_addr</code><a class="headerlink" href="#_CPPv4N26esp_image_segment_header_t9load_addrE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Address of segment </p>
</dd></dl>

<dl class="member">
<dt id="_CPPv4N26esp_image_segment_header_t8data_lenE">
<span id="_CPPv3N26esp_image_segment_header_t8data_lenE"></span><span id="_CPPv2N26esp_image_segment_header_t8data_lenE"></span><span id="esp_image_segment_header_t::data_len__uint32_t"></span><span class="target" id="structesp__image__segment__header__t_1a2d0fdeef51585d4fb4de6a239604e3b9"></span>uint32_t <code class="descname">data_len</code><a class="headerlink" href="#_CPPv4N26esp_image_segment_header_t8data_lenE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Length of data </p>
</dd></dl>

</div>
</dd></dl>

<dl class="class">
<dt id="_CPPv414esp_app_desc_t">
<span id="_CPPv314esp_app_desc_t"></span><span id="_CPPv214esp_app_desc_t"></span><span id="esp_app_desc_t"></span><span class="target" id="structesp__app__desc__t"></span><em class="property">struct </em><code class="descname">esp_app_desc_t</code><a class="headerlink" href="#_CPPv414esp_app_desc_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Description about application. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Public Members</p>
<dl class="member">
<dt id="_CPPv4N14esp_app_desc_t10magic_wordE">
<span id="_CPPv3N14esp_app_desc_t10magic_wordE"></span><span id="_CPPv2N14esp_app_desc_t10magic_wordE"></span><span id="esp_app_desc_t::magic_word__uint32_t"></span><span class="target" id="structesp__app__desc__t_1ada818e71f07a98107f26b45d752fe1f0"></span>uint32_t <code class="descname">magic_word</code><a class="headerlink" href="#_CPPv4N14esp_app_desc_t10magic_wordE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Magic word ESP_APP_DESC_MAGIC_WORD </p>
</dd></dl>

<dl class="member">
<dt id="_CPPv4N14esp_app_desc_t14secure_versionE">
<span id="_CPPv3N14esp_app_desc_t14secure_versionE"></span><span id="_CPPv2N14esp_app_desc_t14secure_versionE"></span><span id="esp_app_desc_t::secure_version__uint32_t"></span><span class="target" id="structesp__app__desc__t_1a0db365c9f2a9f76b69b8817be99ad479"></span>uint32_t <code class="descname">secure_version</code><a class="headerlink" href="#_CPPv4N14esp_app_desc_t14secure_versionE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Secure version </p>
</dd></dl>

<dl class="member">
<dt id="_CPPv4N14esp_app_desc_t7reserv1E">
<span id="_CPPv3N14esp_app_desc_t7reserv1E"></span><span id="_CPPv2N14esp_app_desc_t7reserv1E"></span><span id="esp_app_desc_t::reserv1__uint32_tA"></span><span class="target" id="structesp__app__desc__t_1a847073a005b0633622b7a5e4f835f624"></span>uint32_t <code class="descname">reserv1</code>[2]<a class="headerlink" href="#_CPPv4N14esp_app_desc_t7reserv1E" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>reserv1 </p>
</dd></dl>

<dl class="member">
<dt id="_CPPv4N14esp_app_desc_t7versionE">
<span id="_CPPv3N14esp_app_desc_t7versionE"></span><span id="_CPPv2N14esp_app_desc_t7versionE"></span><span id="esp_app_desc_t::version__cA"></span><span class="target" id="structesp__app__desc__t_1a918dd407d5b3b2f1653f9bad5900ef32"></span>char <code class="descname">version</code>[32]<a class="headerlink" href="#_CPPv4N14esp_app_desc_t7versionE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Application version </p>
</dd></dl>

<dl class="member">
<dt id="_CPPv4N14esp_app_desc_t12project_nameE">
<span id="_CPPv3N14esp_app_desc_t12project_nameE"></span><span id="_CPPv2N14esp_app_desc_t12project_nameE"></span><span id="esp_app_desc_t::project_name__cA"></span><span class="target" id="structesp__app__desc__t_1ac45a4bf608969cdef39c31d8718dd1bf"></span>char <code class="descname">project_name</code>[32]<a class="headerlink" href="#_CPPv4N14esp_app_desc_t12project_nameE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Project name </p>
</dd></dl>

<dl class="member">
<dt id="_CPPv4N14esp_app_desc_t4timeE">
<span id="_CPPv3N14esp_app_desc_t4timeE"></span><span id="_CPPv2N14esp_app_desc_t4timeE"></span><span id="esp_app_desc_t::time__cA"></span><span class="target" id="structesp__app__desc__t_1a3d0d15c79495dd8a7c510fbbaaa61c0e"></span>char <code class="descname">time</code>[16]<a class="headerlink" href="#_CPPv4N14esp_app_desc_t4timeE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Compile time </p>
</dd></dl>

<dl class="member">
<dt id="_CPPv4N14esp_app_desc_t4dateE">
<span id="_CPPv3N14esp_app_desc_t4dateE"></span><span id="_CPPv2N14esp_app_desc_t4dateE"></span><span id="esp_app_desc_t::date__cA"></span><span class="target" id="structesp__app__desc__t_1ae8f06b367fb4fe0e7d14f8354bd8708e"></span>char <code class="descname">date</code>[16]<a class="headerlink" href="#_CPPv4N14esp_app_desc_t4dateE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Compile date </p>
</dd></dl>

<dl class="member">
<dt id="_CPPv4N14esp_app_desc_t7idf_verE">
<span id="_CPPv3N14esp_app_desc_t7idf_verE"></span><span id="_CPPv2N14esp_app_desc_t7idf_verE"></span><span id="esp_app_desc_t::idf_ver__cA"></span><span class="target" id="structesp__app__desc__t_1a384908ca882c6ce648e2a312eb004d9e"></span>char <code class="descname">idf_ver</code>[32]<a class="headerlink" href="#_CPPv4N14esp_app_desc_t7idf_verE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Version IDF </p>
</dd></dl>

<dl class="member">
<dt id="_CPPv4N14esp_app_desc_t14app_elf_sha256E">
<span id="_CPPv3N14esp_app_desc_t14app_elf_sha256E"></span><span id="_CPPv2N14esp_app_desc_t14app_elf_sha256E"></span><span id="esp_app_desc_t::app_elf_sha256__uint8_tA"></span><span class="target" id="structesp__app__desc__t_1aa46eb72403a7916bd14cc7a01b50e501"></span>uint8_t <code class="descname">app_elf_sha256</code>[32]<a class="headerlink" href="#_CPPv4N14esp_app_desc_t14app_elf_sha256E" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>sha256 of elf file </p>
</dd></dl>

<dl class="member">
<dt id="_CPPv4N14esp_app_desc_t7reserv2E">
<span id="_CPPv3N14esp_app_desc_t7reserv2E"></span><span id="_CPPv2N14esp_app_desc_t7reserv2E"></span><span id="esp_app_desc_t::reserv2__uint32_tA"></span><span class="target" id="structesp__app__desc__t_1a2b75db8e76c7d6c8e734df01f811d695"></span>uint32_t <code class="descname">reserv2</code>[20]<a class="headerlink" href="#_CPPv4N14esp_app_desc_t7reserv2E" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>reserv2 </p>
</dd></dl>

</div>
</dd></dl>

</div>
<div class="section" id="macros">
<h3>Macros<a class="headerlink" href="#macros" title="Permalink to this headline">¶</a></h3>
<dl class="macro">
<dt id="c.ESP_IMAGE_HEADER_MAGIC">
<span class="target" id="esp__app__format_8h_1a5b8da1a8024d841f49604e58564f8b3d"></span><code class="descname">ESP_IMAGE_HEADER_MAGIC</code><a class="headerlink" href="#c.ESP_IMAGE_HEADER_MAGIC" title="Permalink to this definition">¶</a></dt>
<dd><p>The magic word for the <a class="reference internal" href="#structesp__image__header__t"><span class="std std-ref">esp_image_header_t</span></a> structure. </p>
</dd></dl>

<dl class="macro">
<dt id="c.ESP_IMAGE_MAX_SEGMENTS">
<span class="target" id="esp__app__format_8h_1aba13cb72e92cdd51402b07bd463a1345"></span><code class="descname">ESP_IMAGE_MAX_SEGMENTS</code><a class="headerlink" href="#c.ESP_IMAGE_MAX_SEGMENTS" title="Permalink to this definition">¶</a></dt>
<dd><p>Max count of segments in the image. </p>
</dd></dl>

<dl class="macro">
<dt id="c.ESP_APP_DESC_MAGIC_WORD">
<span class="target" id="esp__app__format_8h_1a32b95c323aa4358f67d9c5c2f9b31c0a"></span><code class="descname">ESP_APP_DESC_MAGIC_WORD</code><a class="headerlink" href="#c.ESP_APP_DESC_MAGIC_WORD" title="Permalink to this definition">¶</a></dt>
<dd><p>The magic word for the esp_app_desc structure that is in DROM. </p>
</dd></dl>

</div>
<div class="section" id="enumerations">
<h3>Enumerations<a class="headerlink" href="#enumerations" title="Permalink to this headline">¶</a></h3>
<dl class="type">
<dt id="_CPPv413esp_chip_id_t">
<span id="_CPPv313esp_chip_id_t"></span><span id="_CPPv213esp_chip_id_t"></span><span id="esp_chip_id_t"></span><span class="target" id="esp__app__format_8h_1aaa179fd7b2aefef3b9a90456d4461302"></span><em class="property">enum </em><code class="descname">esp_chip_id_t</code><a class="headerlink" href="#_CPPv413esp_chip_id_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>ESP chip ID. </p>
<p><em>Values:</em></p>
<dl class="enumerator">
<dt id="_CPPv417ESP_CHIP_ID_ESP32">
<span id="_CPPv317ESP_CHIP_ID_ESP32"></span><span id="_CPPv217ESP_CHIP_ID_ESP32"></span><span class="target" id="esp__app__format_8h_1aaa179fd7b2aefef3b9a90456d4461302afd5eab33eaf518e2673affa58cb21a88"></span><code class="descname">ESP_CHIP_ID_ESP32</code> = 0x0000<a class="headerlink" href="#_CPPv417ESP_CHIP_ID_ESP32" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>chip ID: ESP32 </p>
</dd></dl>

<dl class="enumerator">
<dt id="_CPPv419ESP_CHIP_ID_INVALID">
<span id="_CPPv319ESP_CHIP_ID_INVALID"></span><span id="_CPPv219ESP_CHIP_ID_INVALID"></span><span class="target" id="esp__app__format_8h_1aaa179fd7b2aefef3b9a90456d4461302a68540a6e2bfd149dbf1928f179d13452"></span><code class="descname">ESP_CHIP_ID_INVALID</code> = 0xFFFF<a class="headerlink" href="#_CPPv419ESP_CHIP_ID_INVALID" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Invalid chip ID (we defined it to make sure the esp_chip_id_t is 2 bytes size) </p>
</dd></dl>

</dd></dl>

<dl class="type">
<dt id="_CPPv420esp_image_spi_mode_t">
<span id="_CPPv320esp_image_spi_mode_t"></span><span id="_CPPv220esp_image_spi_mode_t"></span><span id="esp_image_spi_mode_t"></span><span class="target" id="esp__app__format_8h_1a91de9829bff47799f639a2a60e6256a0"></span><em class="property">enum </em><code class="descname">esp_image_spi_mode_t</code><a class="headerlink" href="#_CPPv420esp_image_spi_mode_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>SPI flash mode, used in <a class="reference internal" href="#structesp__image__header__t"><span class="std std-ref">esp_image_header_t</span></a>. </p>
<p><em>Values:</em></p>
<dl class="enumerator">
<dt id="_CPPv422ESP_IMAGE_SPI_MODE_QIO">
<span id="_CPPv322ESP_IMAGE_SPI_MODE_QIO"></span><span id="_CPPv222ESP_IMAGE_SPI_MODE_QIO"></span><span class="target" id="esp__app__format_8h_1a91de9829bff47799f639a2a60e6256a0ae82bdf1395f792a8007c1920059a6ac9"></span><code class="descname">ESP_IMAGE_SPI_MODE_QIO</code><a class="headerlink" href="#_CPPv422ESP_IMAGE_SPI_MODE_QIO" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>SPI mode QIO </p>
</dd></dl>

<dl class="enumerator">
<dt id="_CPPv423ESP_IMAGE_SPI_MODE_QOUT">
<span id="_CPPv323ESP_IMAGE_SPI_MODE_QOUT"></span><span id="_CPPv223ESP_IMAGE_SPI_MODE_QOUT"></span><span class="target" id="esp__app__format_8h_1a91de9829bff47799f639a2a60e6256a0a78e2a4f0624e7ef70101aa0ab89e878d"></span><code class="descname">ESP_IMAGE_SPI_MODE_QOUT</code><a class="headerlink" href="#_CPPv423ESP_IMAGE_SPI_MODE_QOUT" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>SPI mode QOUT </p>
</dd></dl>

<dl class="enumerator">
<dt id="_CPPv422ESP_IMAGE_SPI_MODE_DIO">
<span id="_CPPv322ESP_IMAGE_SPI_MODE_DIO"></span><span id="_CPPv222ESP_IMAGE_SPI_MODE_DIO"></span><span class="target" id="esp__app__format_8h_1a91de9829bff47799f639a2a60e6256a0a978cd51e480967810164467663067a1c"></span><code class="descname">ESP_IMAGE_SPI_MODE_DIO</code><a class="headerlink" href="#_CPPv422ESP_IMAGE_SPI_MODE_DIO" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>SPI mode DIO </p>
</dd></dl>

<dl class="enumerator">
<dt id="_CPPv423ESP_IMAGE_SPI_MODE_DOUT">
<span id="_CPPv323ESP_IMAGE_SPI_MODE_DOUT"></span><span id="_CPPv223ESP_IMAGE_SPI_MODE_DOUT"></span><span class="target" id="esp__app__format_8h_1a91de9829bff47799f639a2a60e6256a0a6cce09f9e30f0dfd6aaeb7a3058e8a49"></span><code class="descname">ESP_IMAGE_SPI_MODE_DOUT</code><a class="headerlink" href="#_CPPv423ESP_IMAGE_SPI_MODE_DOUT" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>SPI mode DOUT </p>
</dd></dl>

<dl class="enumerator">
<dt id="_CPPv428ESP_IMAGE_SPI_MODE_FAST_READ">
<span id="_CPPv328ESP_IMAGE_SPI_MODE_FAST_READ"></span><span id="_CPPv228ESP_IMAGE_SPI_MODE_FAST_READ"></span><span class="target" id="esp__app__format_8h_1a91de9829bff47799f639a2a60e6256a0a080704c7c0e9e8f2e2b5d4a1c3fc3e8f"></span><code class="descname">ESP_IMAGE_SPI_MODE_FAST_READ</code><a class="headerlink" href="#_CPPv428ESP_IMAGE_SPI_MODE_FAST_READ" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>SPI mode FAST_READ </p>
</dd></dl>

<dl class="enumerator">
<dt id="_CPPv428ESP_IMAGE_SPI_MODE_SLOW_READ">
<span id="_CPPv328ESP_IMAGE_SPI_MODE_SLOW_READ"></span><span id="_CPPv228ESP_IMAGE_SPI_MODE_SLOW_READ"></span><span class="target" id="esp__app__format_8h_1a91de9829bff47799f639a2a60e6256a0adf37744c441efcd0ad59a2bfd6bf66d7"></span><code class="descname">ESP_IMAGE_SPI_MODE_SLOW_READ</code><a class="headerlink" href="#_CPPv428ESP_IMAGE_SPI_MODE_SLOW_READ" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>SPI mode SLOW_READ </p>
</dd></dl>

</dd></dl>

<dl class="type">
<dt id="_CPPv420esp_image_spi_freq_t">
<span id="_CPPv320esp_image_spi_freq_t"></span><span id="_CPPv220esp_image_spi_freq_t"></span><span id="esp_image_spi_freq_t"></span><span class="target" id="esp__app__format_8h_1a9a4bb6a5ed31cd7e48e6ff956daca6b4"></span><em class="property">enum </em><code class="descname">esp_image_spi_freq_t</code><a class="headerlink" href="#_CPPv420esp_image_spi_freq_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>SPI flash clock frequency. </p>
<p><em>Values:</em></p>
<dl class="enumerator">
<dt id="_CPPv423ESP_IMAGE_SPI_SPEED_40M">
<span id="_CPPv323ESP_IMAGE_SPI_SPEED_40M"></span><span id="_CPPv223ESP_IMAGE_SPI_SPEED_40M"></span><span class="target" id="esp__app__format_8h_1a9a4bb6a5ed31cd7e48e6ff956daca6b4ae5ef560f2dd8d7c88968de40bb6a4a3f"></span><code class="descname">ESP_IMAGE_SPI_SPEED_40M</code><a class="headerlink" href="#_CPPv423ESP_IMAGE_SPI_SPEED_40M" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>SPI clock frequency 40 MHz </p>
</dd></dl>

<dl class="enumerator">
<dt id="_CPPv423ESP_IMAGE_SPI_SPEED_26M">
<span id="_CPPv323ESP_IMAGE_SPI_SPEED_26M"></span><span id="_CPPv223ESP_IMAGE_SPI_SPEED_26M"></span><span class="target" id="esp__app__format_8h_1a9a4bb6a5ed31cd7e48e6ff956daca6b4a226423774b503b147b9795a4dd19c502"></span><code class="descname">ESP_IMAGE_SPI_SPEED_26M</code><a class="headerlink" href="#_CPPv423ESP_IMAGE_SPI_SPEED_26M" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>SPI clock frequency 26 MHz </p>
</dd></dl>

<dl class="enumerator">
<dt id="_CPPv423ESP_IMAGE_SPI_SPEED_20M">
<span id="_CPPv323ESP_IMAGE_SPI_SPEED_20M"></span><span id="_CPPv223ESP_IMAGE_SPI_SPEED_20M"></span><span class="target" id="esp__app__format_8h_1a9a4bb6a5ed31cd7e48e6ff956daca6b4ac16d30a7f0b99f8f59dd0190456d52f0"></span><code class="descname">ESP_IMAGE_SPI_SPEED_20M</code><a class="headerlink" href="#_CPPv423ESP_IMAGE_SPI_SPEED_20M" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>SPI clock frequency 20 MHz </p>
</dd></dl>

<dl class="enumerator">
<dt id="_CPPv423ESP_IMAGE_SPI_SPEED_80M">
<span id="_CPPv323ESP_IMAGE_SPI_SPEED_80M"></span><span id="_CPPv223ESP_IMAGE_SPI_SPEED_80M"></span><span class="target" id="esp__app__format_8h_1a9a4bb6a5ed31cd7e48e6ff956daca6b4a043e6c401e1efb508aa091ca2c3172f2"></span><code class="descname">ESP_IMAGE_SPI_SPEED_80M</code> = 0xF<a class="headerlink" href="#_CPPv423ESP_IMAGE_SPI_SPEED_80M" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>SPI clock frequency 80 MHz </p>
</dd></dl>

</dd></dl>

<dl class="type">
<dt id="_CPPv422esp_image_flash_size_t">
<span id="_CPPv322esp_image_flash_size_t"></span><span id="_CPPv222esp_image_flash_size_t"></span><span id="esp_image_flash_size_t"></span><span class="target" id="esp__app__format_8h_1a513758795fde686eb25473bbc175c60a"></span><em class="property">enum </em><code class="descname">esp_image_flash_size_t</code><a class="headerlink" href="#_CPPv422esp_image_flash_size_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Supported SPI flash sizes. </p>
<p><em>Values:</em></p>
<dl class="enumerator">
<dt id="_CPPv424ESP_IMAGE_FLASH_SIZE_1MB">
<span id="_CPPv324ESP_IMAGE_FLASH_SIZE_1MB"></span><span id="_CPPv224ESP_IMAGE_FLASH_SIZE_1MB"></span><span class="target" id="esp__app__format_8h_1a513758795fde686eb25473bbc175c60aa2dbb85611f2ce9d30387f2006b84a3f7"></span><code class="descname">ESP_IMAGE_FLASH_SIZE_1MB</code> = 0<a class="headerlink" href="#_CPPv424ESP_IMAGE_FLASH_SIZE_1MB" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>SPI flash size 1 MB </p>
</dd></dl>

<dl class="enumerator">
<dt id="_CPPv424ESP_IMAGE_FLASH_SIZE_2MB">
<span id="_CPPv324ESP_IMAGE_FLASH_SIZE_2MB"></span><span id="_CPPv224ESP_IMAGE_FLASH_SIZE_2MB"></span><span class="target" id="esp__app__format_8h_1a513758795fde686eb25473bbc175c60aa76d5708749c81bb30ac7bb382fc8bd2c"></span><code class="descname">ESP_IMAGE_FLASH_SIZE_2MB</code><a class="headerlink" href="#_CPPv424ESP_IMAGE_FLASH_SIZE_2MB" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>SPI flash size 2 MB </p>
</dd></dl>

<dl class="enumerator">
<dt id="_CPPv424ESP_IMAGE_FLASH_SIZE_4MB">
<span id="_CPPv324ESP_IMAGE_FLASH_SIZE_4MB"></span><span id="_CPPv224ESP_IMAGE_FLASH_SIZE_4MB"></span><span class="target" id="esp__app__format_8h_1a513758795fde686eb25473bbc175c60aa7669145246c925eafaa96fbddd799093"></span><code class="descname">ESP_IMAGE_FLASH_SIZE_4MB</code><a class="headerlink" href="#_CPPv424ESP_IMAGE_FLASH_SIZE_4MB" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>SPI flash size 4 MB </p>
</dd></dl>

<dl class="enumerator">
<dt id="_CPPv424ESP_IMAGE_FLASH_SIZE_8MB">
<span id="_CPPv324ESP_IMAGE_FLASH_SIZE_8MB"></span><span id="_CPPv224ESP_IMAGE_FLASH_SIZE_8MB"></span><span class="target" id="esp__app__format_8h_1a513758795fde686eb25473bbc175c60aa072f6a2c50121b763325650407f6eead"></span><code class="descname">ESP_IMAGE_FLASH_SIZE_8MB</code><a class="headerlink" href="#_CPPv424ESP_IMAGE_FLASH_SIZE_8MB" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>SPI flash size 8 MB </p>
</dd></dl>

<dl class="enumerator">
<dt id="_CPPv425ESP_IMAGE_FLASH_SIZE_16MB">
<span id="_CPPv325ESP_IMAGE_FLASH_SIZE_16MB"></span><span id="_CPPv225ESP_IMAGE_FLASH_SIZE_16MB"></span><span class="target" id="esp__app__format_8h_1a513758795fde686eb25473bbc175c60aa8b127017b2777645ed538541cd248048"></span><code class="descname">ESP_IMAGE_FLASH_SIZE_16MB</code><a class="headerlink" href="#_CPPv425ESP_IMAGE_FLASH_SIZE_16MB" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>SPI flash size 16 MB </p>
</dd></dl>

<dl class="enumerator">
<dt id="_CPPv424ESP_IMAGE_FLASH_SIZE_MAX">
<span id="_CPPv324ESP_IMAGE_FLASH_SIZE_MAX"></span><span id="_CPPv224ESP_IMAGE_FLASH_SIZE_MAX"></span><span class="target" id="esp__app__format_8h_1a513758795fde686eb25473bbc175c60aab26600350c054ea1a99e28dad57aa9d6"></span><code class="descname">ESP_IMAGE_FLASH_SIZE_MAX</code><a class="headerlink" href="#_CPPv424ESP_IMAGE_FLASH_SIZE_MAX" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>SPI flash size MAX </p>
</dd></dl>

</dd></dl>

</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="app_trace.html" class="btn btn-neutral float-right" title="Application Level Tracing" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral float-left" title="System API" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016 - 2019, Espressif Systems (Shanghai) CO., LTD
      
        <span class="commit">
          Revision <code>f9108063</code>.
        </span>
      

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org/">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Read the Docs</span>
      v: latest
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Versions</dt>
        
          <dd><a href="https://docs.espressif.com/en/latest/">latest</a></dd>
        
          <dd><a href="https://docs.espressif.com/en/stable/">stable</a></dd>
        
          <dd><a href="https://docs.espressif.com/en/v4.0-rc/">v4.0-rc</a></dd>
        
          <dd><a href="https://docs.espressif.com/en/v4.0-beta2/">v4.0-beta2</a></dd>
        
          <dd><a href="https://docs.espressif.com/en/v3.3.1/">v3.3.1</a></dd>
        
          <dd><a href="https://docs.espressif.com/en/v3.3/">v3.3</a></dd>
        
          <dd><a href="https://docs.espressif.com/en/v3.2.3/">v3.2.3</a></dd>
        
          <dd><a href="https://docs.espressif.com/en/v3.2.2/">v3.2.2</a></dd>
        
          <dd><a href="https://docs.espressif.com/en/v3.1.6/">v3.1.6</a></dd>
        
          <dd><a href="https://docs.espressif.com/en/v3.1.5/">v3.1.5</a></dd>
        
          <dd><a href="https://docs.espressif.com/en/v3.0.9/">v3.0.9</a></dd>
        
          <dd><a href="https://docs.espressif.com/en/release-v4.1/">release-v4.1</a></dd>
        
          <dd><a href="https://docs.espressif.com/en/release-v4.0/">release-v4.0</a></dd>
        
          <dd><a href="https://docs.espressif.com/en/release-v3.3/">release-v3.3</a></dd>
        
          <dd><a href="https://docs.espressif.com/en/release-v3.2/">release-v3.2</a></dd>
        
          <dd><a href="https://docs.espressif.com/en/release-v3.1/">release-v3.1</a></dd>
        
          <dd><a href="https://docs.espressif.com/en/release-v3.0/">release-v3.0</a></dd>
        
      </dl>
      <dl>
        <dt>Downloads</dt>
        
          <dd><a href="http://docs.espressif.com/_/downloads/esp-idf/en/latest/pdf/">pdf</a></dd>
        
      </dl>
      <dl>
        <dt>On Read the Docs</dt>
          <dd>
            <a href="http://readthedocs.com/projects/espressif-esp-idf/?fromdocs=espressif-esp-idf">Project Home</a>
          </dd>
          <dd>
            <a href="http://readthedocs.com/builds/espressif-esp-idf/?fromdocs=espressif-esp-idf">Builds</a>
          </dd>
      </dl>
      <hr/>
      Free document hosting provided by <a href="http://www.readthedocs.org/">Read the Docs</a>.

    </div>
  </div>



  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
   

</body>

<!-- Mirrored from docs.espressif.com/projects/esp-idf/en/latest/api-reference/system/app_image_format.html by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 29 Feb 2020 06:26:11 GMT -->
</html>