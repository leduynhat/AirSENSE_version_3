

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->

<!-- Mirrored from docs.espressif.com/projects/esp-idf/en/latest/api-reference/system/sleep_modes.html by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 29 Feb 2020 06:26:12 GMT -->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Sleep Modes &mdash; ESP-IDF Programming Guide v4.1-dev-2071-gf91080637 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
        <script type="text/javascript" src="../../../../../../../media.readthedocs.com/javascript/readthedocs-doc-embed.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/theme_overrides.css" type="text/css" />
    <link rel="author" title="About these documents" href="../../about.html" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Watchdogs" href="wdts.html" />
    <link rel="prev" title="Power Management" href="power_management.html" /> 

<!-- RTD Extra Head -->

<!-- 
Always link to the latest version, as canonical.
http://docs.readthedocs.org/en/latest/canonical.html
-->
<link rel="canonical" href="sleep_modes.html" />

<link rel="stylesheet" href="../../../../../../../media.readthedocs.com/css/readthedocs-doc-embed.css" type="text/css" />

<script type="text/javascript" src="../../_static/readthedocs-data.js"></script>

<!-- Add page-specific data, which must exist in the page js, not global -->
<script type="text/javascript">
READTHEDOCS_DATA['page'] = "api-reference/system/sleep_modes"
READTHEDOCS_DATA['source_suffix'] = ".rst"
</script>

<script type="text/javascript" src="../../../../../../../media.readthedocs.com/javascript/readthedocs-analytics.js"></script>

<!-- end RTD <extrahead> -->
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index-2.html" class="icon icon-home"> ESP-IDF Programming Guide
          

          
            
            <img src="../../_static/espressif-logo.svg" class="logo" alt="Logo"/>
          
          </a>

          
            
            
            
              <div class="version">
                latest
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="https://docs.espressif.com/projects/esp-idf/en/latest/search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../get-started/index.html">Get Started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">API Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../bluetooth/index.html">Bluetooth</a></li>
<li class="toctree-l2"><a class="reference internal" href="../network/index.html">Networking</a></li>
<li class="toctree-l2"><a class="reference internal" href="../peripherals/index.html">Peripherals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../protocols/index.html">Protocols</a></li>
<li class="toctree-l2"><a class="reference internal" href="../provisioning/index.html">Provisioning</a></li>
<li class="toctree-l2"><a class="reference internal" href="../storage/index.html">Storage</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">System</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="app_image_format.html">App image format</a></li>
<li class="toctree-l3"><a class="reference internal" href="app_trace.html">Application Level Tracing</a></li>
<li class="toctree-l3"><a class="reference internal" href="efuse.html">eFuse Manager</a></li>
<li class="toctree-l3"><a class="reference internal" href="esp_err.html">Error Codes and Helper Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="esp_https_ota.html">ESP HTTPS OTA</a></li>
<li class="toctree-l3"><a class="reference internal" href="esp_pthread.html">ESP pthread</a></li>
<li class="toctree-l3"><a class="reference internal" href="esp_event.html">Event Loop Library</a></li>
<li class="toctree-l3"><a class="reference internal" href="freertos.html">FreeRTOS</a></li>
<li class="toctree-l3"><a class="reference internal" href="freertos_additions.html">FreeRTOS Additions</a></li>
<li class="toctree-l3"><a class="reference internal" href="mem_alloc.html">Heap Memory Allocation</a></li>
<li class="toctree-l3"><a class="reference internal" href="heap_debug.html">Heap Memory Debugging</a></li>
<li class="toctree-l3"><a class="reference internal" href="esp_timer.html">High Resolution Timer</a></li>
<li class="toctree-l3"><a class="reference internal" href="himem.html">Himem (large external SPI RAM) API</a></li>
<li class="toctree-l3"><a class="reference internal" href="ipc.html">Inter-Processor Call</a></li>
<li class="toctree-l3"><a class="reference internal" href="esp_expression_with_stack.html">Call function with external stack</a></li>
<li class="toctree-l3"><a class="reference internal" href="intr_alloc.html">Interrupt Allocation</a></li>
<li class="toctree-l3"><a class="reference internal" href="log.html">Logging</a></li>
<li class="toctree-l3"><a class="reference internal" href="system.html">Miscellaneous System APIs</a></li>
<li class="toctree-l3"><a class="reference internal" href="ota.html">Over The Air Updates (OTA)</a></li>
<li class="toctree-l3"><a class="reference internal" href="perfmon.html">Performance Monitor</a></li>
<li class="toctree-l3"><a class="reference internal" href="power_management.html">Power Management</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Sleep Modes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#wifi-bt-and-sleep-modes">WiFi/BT and sleep modes</a></li>
<li class="toctree-l4"><a class="reference internal" href="#wakeup-sources">Wakeup sources</a></li>
<li class="toctree-l4"><a class="reference internal" href="#power-down-of-rtc-peripherals-and-memories">Power-down of RTC peripherals and memories</a></li>
<li class="toctree-l4"><a class="reference internal" href="#entering-light-sleep">Entering light sleep</a></li>
<li class="toctree-l4"><a class="reference internal" href="#entering-deep-sleep">Entering deep sleep</a></li>
<li class="toctree-l4"><a class="reference internal" href="#configuring-ios">Configuring IOs</a></li>
<li class="toctree-l4"><a class="reference internal" href="#uart-output-handling">UART output handling</a></li>
<li class="toctree-l4"><a class="reference internal" href="#checking-sleep-wakeup-cause">Checking sleep wakeup cause</a></li>
<li class="toctree-l4"><a class="reference internal" href="#disable-sleep-wakeup-source">Disable sleep wakeup source</a></li>
<li class="toctree-l4"><a class="reference internal" href="#application-example">Application Example</a></li>
<li class="toctree-l4"><a class="reference internal" href="#api-reference">API Reference</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="wdts.html">Watchdogs</a></li>
<li class="toctree-l3"><a class="reference internal" href="system_time.html">System Time</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../kconfig.html">Configuration Options</a></li>
<li class="toctree-l2"><a class="reference internal" href="../error-codes.html">Error Codes Reference</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../hw-reference/index.html">H/W Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../esp32s2.html">ESP32-S2 Preview Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api-guides/index.html">API Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../libraries-and-frameworks/index.html">Libraries and Frameworks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contribute/index.html">Contribute</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../versions.html">Versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../resources.html">Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../COPYRIGHT.html">Copyrights</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../about.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../languages.html">语言/Languages</a></li>
<li class="toctree-l1"><a class="reference external" href="https://readthedocs.com/projects/espressif-esp-idf/downloads/">Guide Downloads</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index-2.html">ESP-IDF Programming Guide</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index-2.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">API Reference</a> &raquo;</li>
        
          <li><a href="index.html">System API</a> &raquo;</li>
        
      <li>Sleep Modes</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/espressif/esp-idf/blob/master/docs/en/api-reference/system/sleep_modes.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="sleep-modes">
<h1>Sleep Modes<a class="headerlink" href="#sleep-modes" title="Permalink to this headline">¶</a></h1>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>ESP32 is capable of light sleep and deep sleep power saving modes.</p>
<p>In light sleep mode, digital peripherals, most of the RAM, and CPUs are clock-gated, and supply voltage is reduced. Upon exit from light sleep, peripherals and CPUs resume operation, their internal state is preserved.</p>
<p>In deep sleep mode, CPUs, most of the RAM, and all the digital peripherals which are clocked from APB_CLK are powered off. The only parts of the chip which can still be powered on are: RTC controller, RTC peripherals (including ULP coprocessor), and RTC memories (slow and fast).</p>
<p>Wakeup from deep and light sleep modes can be done using several sources. These sources can be combined, in this case the chip will wake up when any one of the sources is triggered. Wakeup sources can be enabled using <code class="docutils literal notranslate"><span class="pre">esp_sleep_enable_X_wakeup</span></code> APIs and can be disabled using <a class="reference internal" href="#_CPPv431esp_sleep_disable_wakeup_source18esp_sleep_source_t" title="esp_sleep_disable_wakeup_source"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_sleep_disable_wakeup_source()</span></code></a> API. Next section describes these APIs in detail. Wakeup sources can be configured at any moment before entering light or deep sleep mode.</p>
<p>Additionally, the application can force specific powerdown modes for the RTC peripherals and RTC memories using <a class="reference internal" href="#_CPPv419esp_sleep_pd_config21esp_sleep_pd_domain_t21esp_sleep_pd_option_t" title="esp_sleep_pd_config"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_sleep_pd_config()</span></code></a> API.</p>
<p>Once wakeup sources are configured, application can enter sleep mode using <a class="reference internal" href="#_CPPv421esp_light_sleep_startv" title="esp_light_sleep_start"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_light_sleep_start()</span></code></a> or <a class="reference internal" href="#_CPPv420esp_deep_sleep_startv" title="esp_deep_sleep_start"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_deep_sleep_start()</span></code></a> APIs. At this point the hardware will be configured according to the requested wakeup sources, and RTC controller will either power down or power off the CPUs and digital peripherals.</p>
</div>
<div class="section" id="wifi-bt-and-sleep-modes">
<h2>WiFi/BT and sleep modes<a class="headerlink" href="#wifi-bt-and-sleep-modes" title="Permalink to this headline">¶</a></h2>
<p>In deep sleep and light sleep modes, wireless peripherals are powered down. Before entering deep sleep or light sleep modes, applications must disable WiFi and BT using appropriate calls (<a class="reference internal" href="../bluetooth/esp_bt_main.html#_CPPv421esp_bluedroid_disablev" title="esp_bluedroid_disable"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_bluedroid_disable()</span></code></a>, <a class="reference internal" href="../bluetooth/controller_vhci.html#_CPPv425esp_bt_controller_disablev" title="esp_bt_controller_disable"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_bt_controller_disable()</span></code></a>, <a class="reference internal" href="../network/esp_wifi.html#_CPPv413esp_wifi_stopv" title="esp_wifi_stop"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_wifi_stop()</span></code></a>). WiFi and BT connections will not be maintained in deep sleep or light sleep, even if these functions are not called.</p>
<p>If WiFi connection needs to be maintained, enable WiFi modem sleep, and enable automatic light sleep feature (see <a class="reference internal" href="power_management.html"><span class="doc">Power Management APIs</span></a>). This will allow the system to wake up from sleep automatically when required by WiFi driver, thereby maintaining connection to the AP.</p>
</div>
<div class="section" id="wakeup-sources">
<h2>Wakeup sources<a class="headerlink" href="#wakeup-sources" title="Permalink to this headline">¶</a></h2>
<div class="section" id="timer">
<h3>Timer<a class="headerlink" href="#timer" title="Permalink to this headline">¶</a></h3>
<p>RTC controller has a built in timer which can be used to wake up the chip after a predefined amount of time. Time is specified at microsecond precision, but the actual resolution depends on the clock source selected for RTC SLOW_CLK. See chapter “Reset and Clock” of the ESP32 Technical Reference Manual for details about RTC clock options.</p>
<p>This wakeup mode doesn’t require RTC peripherals or RTC memories to be powered on during sleep.</p>
<p><a class="reference internal" href="#_CPPv429esp_sleep_enable_timer_wakeup8uint64_t" title="esp_sleep_enable_timer_wakeup"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_sleep_enable_timer_wakeup()</span></code></a> function can be used to enable deep sleep wakeup using a timer.</p>
</div>
<div class="section" id="touch-pad">
<h3>Touch pad<a class="headerlink" href="#touch-pad" title="Permalink to this headline">¶</a></h3>
<p>RTC IO module contains logic to trigger wakeup when a touch sensor interrupt occurs. You need to configure the touch pad interrupt before the chip starts deep sleep.</p>
<p>Revisions 0 and 1 of the ESP32 only support this wakeup mode when RTC peripherals are not forced to be powered on (i.e. ESP_PD_DOMAIN_RTC_PERIPH should be set to ESP_PD_OPTION_AUTO).</p>
<p><a class="reference internal" href="#_CPPv432esp_sleep_enable_touchpad_wakeupv" title="esp_sleep_enable_touchpad_wakeup"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_sleep_enable_touchpad_wakeup()</span></code></a> function can be used to enable this wakeup source.</p>
</div>
<div class="section" id="external-wakeup-ext0">
<h3>External wakeup (ext0)<a class="headerlink" href="#external-wakeup-ext0" title="Permalink to this headline">¶</a></h3>
<p>RTC IO module contains logic to trigger wakeup when one of RTC GPIOs is set to a predefined logic level. RTC IO is part of RTC peripherals power domain, so RTC peripherals will be kept powered on during deep sleep if this wakeup source is requested.</p>
<p>Because RTC IO module is enabled in this mode, internal pullup or pulldown resistors can also be used. They need to be configured by the application using <a class="reference internal" href="../peripherals/gpio.html#_CPPv418rtc_gpio_pullup_en10gpio_num_t" title="rtc_gpio_pullup_en"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">rtc_gpio_pullup_en()</span></code></a> and <a class="reference internal" href="../peripherals/gpio.html#_CPPv420rtc_gpio_pulldown_en10gpio_num_t" title="rtc_gpio_pulldown_en"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">rtc_gpio_pulldown_en()</span></code></a> functions, before calling <code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_sleep_start()</span></code>.</p>
<p>In revisions 0 and 1 of the ESP32, this wakeup source is incompatible with ULP and touch wakeup sources.</p>
<p><a class="reference internal" href="#_CPPv428esp_sleep_enable_ext0_wakeup10gpio_num_ti" title="esp_sleep_enable_ext0_wakeup"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_sleep_enable_ext0_wakeup()</span></code></a> function can be used to enable this wakeup source.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">After wake up from sleep, IO pad used for wakeup will be configured as RTC IO. Before using this pad as digital GPIO, reconfigure it using <code class="docutils literal notranslate"><span class="pre">rtc_gpio_deinit(gpio_num)</span></code> function.</p>
</div>
</div>
<div class="section" id="external-wakeup-ext1">
<h3>External wakeup (ext1)<a class="headerlink" href="#external-wakeup-ext1" title="Permalink to this headline">¶</a></h3>
<p>RTC controller contains logic to trigger wakeup using multiple RTC GPIOs. One of the two logic functions can be used to trigger wakeup:</p>
<blockquote>
<div><ul class="simple">
<li>wake up if any of the selected pins is high (<code class="docutils literal notranslate"><span class="pre">ESP_EXT1_WAKEUP_ANY_HIGH</span></code>)</li>
<li>wake up if all the selected pins are low (<code class="docutils literal notranslate"><span class="pre">ESP_EXT1_WAKEUP_ALL_LOW</span></code>)</li>
</ul>
</div></blockquote>
<p>This wakeup source is implemented by the RTC controller. As such, RTC peripherals and RTC memories can be powered down in this mode. However, if RTC peripherals are powered down, internal pullup and pulldown resistors will be disabled. To use internal pullup or pulldown resistors, request RTC peripherals power domain to be kept on during sleep, and configure pullup/pulldown resistors using <code class="docutils literal notranslate"><span class="pre">rtc_gpio_</span></code> functions, before entering sleep:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">esp_sleep_pd_config</span><span class="p">(</span><span class="n">ESP_PD_DOMAIN_RTC_PERIPH</span><span class="p">,</span> <span class="n">ESP_PD_OPTION_ON</span><span class="p">);</span>
<span class="n">gpio_pullup_dis</span><span class="p">(</span><span class="n">gpio_num</span><span class="p">);</span>
<span class="n">gpio_pulldown_en</span><span class="p">(</span><span class="n">gpio_num</span><span class="p">);</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">After wake up from sleep, IO pad(s) used for wakeup will be configured as RTC IO. Before using these pads as digital GPIOs, reconfigure them using <code class="docutils literal notranslate"><span class="pre">rtc_gpio_deinit(gpio_num)</span></code> function.</p>
</div>
<p><a class="reference internal" href="#_CPPv428esp_sleep_enable_ext1_wakeup8uint64_t28esp_sleep_ext1_wakeup_mode_t" title="esp_sleep_enable_ext1_wakeup"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_sleep_enable_ext1_wakeup()</span></code></a> function can be used to enable this wakeup source.</p>
</div>
<div class="section" id="ulp-coprocessor-wakeup">
<h3>ULP coprocessor wakeup<a class="headerlink" href="#ulp-coprocessor-wakeup" title="Permalink to this headline">¶</a></h3>
<p>ULP coprocessor can run while the chip is in sleep mode, and may be used to poll sensors, monitor ADC or touch sensor values, and wake up the chip when a specific event is detected. ULP coprocessor is part of RTC peripherals power domain, and it runs the program stored in RTC slow memory. RTC slow memory will be powered on during sleep if this wakeup mode is requested. RTC peripherals will be automatically powered on before ULP coprocessor starts running the program; once the program stops running, RTC peripherals are automatically powered down again.</p>
<p>Revisions 0 and 1 of the ESP32 only support this wakeup mode when RTC peripherals are not forced to be powered on (i.e. ESP_PD_DOMAIN_RTC_PERIPH should be set to ESP_PD_OPTION_AUTO).</p>
<p><a class="reference internal" href="#_CPPv427esp_sleep_enable_ulp_wakeupv" title="esp_sleep_enable_ulp_wakeup"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_sleep_enable_ulp_wakeup()</span></code></a> function can be used to enable this wakeup source.</p>
</div>
<div class="section" id="gpio-wakeup-light-sleep-only">
<h3>GPIO wakeup (light sleep only)<a class="headerlink" href="#gpio-wakeup-light-sleep-only" title="Permalink to this headline">¶</a></h3>
<p>In addition to EXT0 and EXT1 wakeup sources described above, one more method of wakeup from external inputs is available in light sleep mode. With this wakeup source, each pin can be individually configured to trigger wakeup on high or low level using <a class="reference internal" href="../peripherals/gpio.html#_CPPv418gpio_wakeup_enable10gpio_num_t15gpio_int_type_t" title="gpio_wakeup_enable"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">gpio_wakeup_enable()</span></code></a> function. Unlike EXT0 and EXT1 wakeup sources, which can only be used with RTC IOs, this wakeup source can be used with any IO (RTC or digital).</p>
<p><a class="reference internal" href="#_CPPv428esp_sleep_enable_gpio_wakeupv" title="esp_sleep_enable_gpio_wakeup"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_sleep_enable_gpio_wakeup()</span></code></a> function can be used to enable this wakeup source.</p>
</div>
<div class="section" id="uart-wakeup-light-sleep-only">
<h3>UART wakeup (light sleep only)<a class="headerlink" href="#uart-wakeup-light-sleep-only" title="Permalink to this headline">¶</a></h3>
<p>When ESP32 receives UART input from external devices, it is often required to wake up the chip when input data is available. UART peripheral contains a feature which allows waking up the chip from light sleep when a certain number of positive edges on RX pin are seen. This number of positive edges can be set using <a class="reference internal" href="../peripherals/uart.html#_CPPv425uart_set_wakeup_threshold11uart_port_ti" title="uart_set_wakeup_threshold"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">uart_set_wakeup_threshold()</span></code></a> function. Note that the character which triggers wakeup (and any characters before it) will not be received by the UART after wakeup. This means that the external device typically needs to send an extra character to the ESP32 to trigger wakeup, before sending the data.</p>
<p><a class="reference internal" href="#_CPPv428esp_sleep_enable_uart_wakeupi" title="esp_sleep_enable_uart_wakeup"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_sleep_enable_uart_wakeup()</span></code></a> function can be used to enable this wakeup source.</p>
</div>
</div>
<div class="section" id="power-down-of-rtc-peripherals-and-memories">
<h2>Power-down of RTC peripherals and memories<a class="headerlink" href="#power-down-of-rtc-peripherals-and-memories" title="Permalink to this headline">¶</a></h2>
<p>By default, <a class="reference internal" href="#_CPPv420esp_deep_sleep_startv" title="esp_deep_sleep_start"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_deep_sleep_start()</span></code></a> and <a class="reference internal" href="#_CPPv421esp_light_sleep_startv" title="esp_light_sleep_start"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_light_sleep_start()</span></code></a> functions will power down all RTC power domains which are not needed by the enabled wakeup sources. To override this behaviour, <a class="reference internal" href="#_CPPv419esp_sleep_pd_config21esp_sleep_pd_domain_t21esp_sleep_pd_option_t" title="esp_sleep_pd_config"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_sleep_pd_config()</span></code></a> function is provided.</p>
<p>Note: in revision 0 of the ESP32, RTC fast memory will always be kept enabled in deep sleep, so that the deep sleep stub can run after reset. This can be overridden, if the application doesn’t need clean reset behaviour after deep sleep.</p>
<p>If some variables in the program are placed into RTC slow memory (for example, using <code class="docutils literal notranslate"><span class="pre">RTC_DATA_ATTR</span></code> attribute), RTC slow memory will be kept powered on by default. This can be overridden using <a class="reference internal" href="#_CPPv419esp_sleep_pd_config21esp_sleep_pd_domain_t21esp_sleep_pd_option_t" title="esp_sleep_pd_config"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_sleep_pd_config()</span></code></a> function, if desired.</p>
</div>
<div class="section" id="entering-light-sleep">
<h2>Entering light sleep<a class="headerlink" href="#entering-light-sleep" title="Permalink to this headline">¶</a></h2>
<p><a class="reference internal" href="#_CPPv421esp_light_sleep_startv" title="esp_light_sleep_start"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_light_sleep_start()</span></code></a> function can be used to enter light sleep once wakeup sources are configured. It is also possible to go into light sleep with no wakeup sources configured, in this case the chip will be in light sleep mode indefinitely, until external reset is applied.</p>
</div>
<div class="section" id="entering-deep-sleep">
<h2>Entering deep sleep<a class="headerlink" href="#entering-deep-sleep" title="Permalink to this headline">¶</a></h2>
<p><a class="reference internal" href="#_CPPv420esp_deep_sleep_startv" title="esp_deep_sleep_start"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_deep_sleep_start()</span></code></a> function can be used to enter deep sleep once wakeup sources are configured. It is also possible to go into deep sleep with no wakeup sources configured, in this case the chip will be in deep sleep mode indefinitely, until external reset is applied.</p>
</div>
<div class="section" id="configuring-ios">
<h2>Configuring IOs<a class="headerlink" href="#configuring-ios" title="Permalink to this headline">¶</a></h2>
<p>Some ESP32 IOs have internal pullups or pulldowns, which are enabled by default. If an external circuit drives this pin in deep sleep mode, current consumption may increase due to current flowing through these pullups and pulldowns.</p>
<p>To isolate a pin, preventing extra current draw, call <a class="reference internal" href="../peripherals/gpio.html#_CPPv416rtc_gpio_isolate10gpio_num_t" title="rtc_gpio_isolate"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">rtc_gpio_isolate()</span></code></a> function.</p>
<p>For example, on ESP32-WROVER module, GPIO12 is pulled up externally. GPIO12 also has an internal pulldown in the ESP32 chip. This means that in deep sleep, some current will flow through these external and internal resistors, increasing deep sleep current above the minimal possible value.
Add the following code before <a class="reference internal" href="#_CPPv420esp_deep_sleep_startv" title="esp_deep_sleep_start"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_deep_sleep_start()</span></code></a> to remove this extra current:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">rtc_gpio_isolate</span><span class="p">(</span><span class="n">GPIO_NUM_12</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="uart-output-handling">
<h2>UART output handling<a class="headerlink" href="#uart-output-handling" title="Permalink to this headline">¶</a></h2>
<p>Before entering sleep mode, <a class="reference internal" href="#_CPPv420esp_deep_sleep_startv" title="esp_deep_sleep_start"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_deep_sleep_start()</span></code></a> will flush the contents of UART FIFOs.</p>
<p>When entering light sleep mode using <a class="reference internal" href="#_CPPv421esp_light_sleep_startv" title="esp_light_sleep_start"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_light_sleep_start()</span></code></a>, UART FIFOs will not be flushed. Instead, UART output will be suspended, and remaining characters in the FIFO will be sent out after wakeup from light sleep.</p>
</div>
<div class="section" id="checking-sleep-wakeup-cause">
<h2>Checking sleep wakeup cause<a class="headerlink" href="#checking-sleep-wakeup-cause" title="Permalink to this headline">¶</a></h2>
<p><a class="reference internal" href="#_CPPv426esp_sleep_get_wakeup_causev" title="esp_sleep_get_wakeup_cause"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_sleep_get_wakeup_cause()</span></code></a> function can be used to check which wakeup source has triggered wakeup from sleep mode.</p>
<p>For touch pad and ext1 wakeup sources, it is possible to identify pin or touch pad which has caused wakeup using <a class="reference internal" href="#_CPPv436esp_sleep_get_touchpad_wakeup_statusv" title="esp_sleep_get_touchpad_wakeup_status"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_sleep_get_touchpad_wakeup_status()</span></code></a> and <a class="reference internal" href="#_CPPv432esp_sleep_get_ext1_wakeup_statusv" title="esp_sleep_get_ext1_wakeup_status"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_sleep_get_ext1_wakeup_status()</span></code></a> functions.</p>
</div>
<div class="section" id="disable-sleep-wakeup-source">
<h2>Disable sleep wakeup source<a class="headerlink" href="#disable-sleep-wakeup-source" title="Permalink to this headline">¶</a></h2>
<p>Previously configured wakeup source can be disabled later using <a class="reference internal" href="#_CPPv431esp_sleep_disable_wakeup_source18esp_sleep_source_t" title="esp_sleep_disable_wakeup_source"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">esp_sleep_disable_wakeup_source()</span></code></a> API. This function deactivates trigger for the given wakeup source. Additionally it can disable all triggers if the argument is <code class="docutils literal notranslate"><span class="pre">ESP_SLEEP_WAKEUP_ALL</span></code>.</p>
</div>
<div class="section" id="application-example">
<h2>Application Example<a class="headerlink" href="#application-example" title="Permalink to this headline">¶</a></h2>
<p>Implementation of basic functionality of deep sleep is shown in <a class="reference external" href="https://github.com/espressif/esp-idf/tree/f91080637/examples/protocols/sntp">protocols/sntp</a> example, where ESP module is periodically waken up to retrieve time from NTP server.</p>
<p>More extensive example in <a class="reference external" href="https://github.com/espressif/esp-idf/tree/f91080637/examples/system/deep_sleep">system/deep_sleep</a> illustrates usage of various deep sleep wakeup triggers and ULP coprocessor programming.</p>
</div>
<div class="section" id="api-reference">
<h2>API Reference<a class="headerlink" href="#api-reference" title="Permalink to this headline">¶</a></h2>
<div class="section" id="header-file">
<h3>Header File<a class="headerlink" href="#header-file" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference external" href="https://github.com/espressif/esp-idf/blob/f91080637/components/esp32/include/esp_sleep.h">esp32/include/esp_sleep.h</a></li>
</ul>
</div>
<div class="section" id="functions">
<h3>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="_CPPv431esp_sleep_disable_wakeup_source18esp_sleep_source_t">
<span id="_CPPv331esp_sleep_disable_wakeup_source18esp_sleep_source_t"></span><span id="_CPPv231esp_sleep_disable_wakeup_source18esp_sleep_source_t"></span><span id="esp_sleep_disable_wakeup_source__esp_sleep_source_t"></span><span class="target" id="esp__sleep_8h_1a6d47ae16727df68b286e7fa97833db1b"></span><a class="reference internal" href="esp_err.html#_CPPv49esp_err_t" title="esp_err_t">esp_err_t</a> <code class="descname">esp_sleep_disable_wakeup_source</code><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv418esp_sleep_source_t" title="esp_sleep_source_t">esp_sleep_source_t</a> <em>source</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv431esp_sleep_disable_wakeup_source18esp_sleep_source_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Disable wakeup source. </p>
<p>This function is used to deactivate wake up trigger for source defined as parameter of the function.</p>
<p><p>See docs/sleep-modes.rst for details.</p>
<dl class="docutils">
<dt><strong>Note</strong></dt>
<dd>This function does not modify wake up configuration in RTC. It will be performed in esp_sleep_start function.</dd>
</dl>
</p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd><ul class="simple">
<li>ESP_OK on success</li>
<li>ESP_ERR_INVALID_STATE if trigger was not active </li>
</ul>
</dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal notranslate"><span class="pre">source</span></code>: - number of source to disable of type esp_sleep_source_t </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv427esp_sleep_enable_ulp_wakeupv">
<span id="_CPPv327esp_sleep_enable_ulp_wakeupv"></span><span id="_CPPv227esp_sleep_enable_ulp_wakeupv"></span><span id="esp_sleep_enable_ulp_wakeup__void"></span><span class="target" id="esp__sleep_8h_1a0503fee9ec3674232d1f54d671d32b54"></span><a class="reference internal" href="esp_err.html#_CPPv49esp_err_t" title="esp_err_t">esp_err_t</a> <code class="descname">esp_sleep_enable_ulp_wakeup</code><span class="sig-paren">(</span>void<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv427esp_sleep_enable_ulp_wakeupv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Enable wakeup by ULP coprocessor. </p>
<p><dl class="docutils">
<dt><strong>Note</strong></dt>
<dd>In revisions 0 and 1 of the ESP32, ULP wakeup source can not be used when RTC_PERIPH power domain is forced to be powered on (ESP_PD_OPTION_ON) or when ext0 wakeup source is used. </dd>
<dt><strong>Return</strong></dt>
<dd><ul class="simple">
<li>ESP_OK on success</li>
<li>ESP_ERR_NOT_SUPPORTED if additional current by touch (CONFIG_ESP32_RTC_EXT_CRYST_ADDIT_CURRENT) is enabled.</li>
<li>ESP_ERR_INVALID_STATE if ULP co-processor is not enabled or if wakeup triggers conflict </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv429esp_sleep_enable_timer_wakeup8uint64_t">
<span id="_CPPv329esp_sleep_enable_timer_wakeup8uint64_t"></span><span id="_CPPv229esp_sleep_enable_timer_wakeup8uint64_t"></span><span id="esp_sleep_enable_timer_wakeup__uint64_t"></span><span class="target" id="esp__sleep_8h_1ac95bf1825c25ef5265baab867c36f513"></span><a class="reference internal" href="esp_err.html#_CPPv49esp_err_t" title="esp_err_t">esp_err_t</a> <code class="descname">esp_sleep_enable_timer_wakeup</code><span class="sig-paren">(</span>uint64_t <em>time_in_us</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv429esp_sleep_enable_timer_wakeup8uint64_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Enable wakeup by timer. </p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd><ul class="simple">
<li>ESP_OK on success</li>
<li>ESP_ERR_INVALID_ARG if value is out of range (TBD) </li>
</ul>
</dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal notranslate"><span class="pre">time_in_us</span></code>: time before wakeup, in microseconds </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv432esp_sleep_enable_touchpad_wakeupv">
<span id="_CPPv332esp_sleep_enable_touchpad_wakeupv"></span><span id="_CPPv232esp_sleep_enable_touchpad_wakeupv"></span><span id="esp_sleep_enable_touchpad_wakeup__void"></span><span class="target" id="esp__sleep_8h_1afb310a12fb149a3dc52a22fa209e00df"></span><a class="reference internal" href="esp_err.html#_CPPv49esp_err_t" title="esp_err_t">esp_err_t</a> <code class="descname">esp_sleep_enable_touchpad_wakeup</code><span class="sig-paren">(</span>void<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv432esp_sleep_enable_touchpad_wakeupv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Enable wakeup by touch sensor. </p>
<p><dl class="docutils">
<dt><strong>Note</strong></dt>
<dd>In revisions 0 and 1 of the ESP32, touch wakeup source can not be used when RTC_PERIPH power domain is forced to be powered on (ESP_PD_OPTION_ON) or when ext0 wakeup source is used.</dd>
<dt><strong>Note</strong></dt>
<dd>The FSM mode of the touch button should be configured as the timer trigger mode.</dd>
<dt><strong>Return</strong></dt>
<dd><ul class="simple">
<li>ESP_OK on success</li>
<li>ESP_ERR_NOT_SUPPORTED if additional current by touch (CONFIG_ESP32_RTC_EXT_CRYST_ADDIT_CURRENT) is enabled.</li>
<li>ESP_ERR_INVALID_STATE if wakeup triggers conflict </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv436esp_sleep_get_touchpad_wakeup_statusv">
<span id="_CPPv336esp_sleep_get_touchpad_wakeup_statusv"></span><span id="_CPPv236esp_sleep_get_touchpad_wakeup_statusv"></span><span id="esp_sleep_get_touchpad_wakeup_status__void"></span><span class="target" id="esp__sleep_8h_1aa144ca60946608e201b62e07db49cc0b"></span><a class="reference internal" href="../peripherals/touch_pad.html#_CPPv411touch_pad_t" title="touch_pad_t">touch_pad_t</a> <code class="descname">esp_sleep_get_touchpad_wakeup_status</code><span class="sig-paren">(</span>void<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv436esp_sleep_get_touchpad_wakeup_statusv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Get the touch pad which caused wakeup. </p>
<p>If wakeup was caused by another source, this function will return TOUCH_PAD_MAX;</p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd>touch pad which caused wakeup </dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv428esp_sleep_enable_ext0_wakeup10gpio_num_ti">
<span id="_CPPv328esp_sleep_enable_ext0_wakeup10gpio_num_ti"></span><span id="_CPPv228esp_sleep_enable_ext0_wakeup10gpio_num_ti"></span><span id="esp_sleep_enable_ext0_wakeup__gpio_num_t.i"></span><span class="target" id="esp__sleep_8h_1a776f51f2a1411927b5f21e09ed4653fb"></span><a class="reference internal" href="esp_err.html#_CPPv49esp_err_t" title="esp_err_t">esp_err_t</a> <code class="descname">esp_sleep_enable_ext0_wakeup</code><span class="sig-paren">(</span>gpio_num_t <em>gpio_num</em>, int <em>level</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv428esp_sleep_enable_ext0_wakeup10gpio_num_ti" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Enable wakeup using a pin. </p>
<p>This function uses external wakeup feature of RTC_IO peripheral. It will work only if RTC peripherals are kept on during sleep.</p>
<p>This feature can monitor any pin which is an RTC IO. Once the pin transitions into the state given by level argument, the chip will be woken up.</p>
<p><dl class="docutils">
<dt><strong>Note</strong></dt>
<dd>This function does not modify pin configuration. The pin is configured in esp_sleep_start, immediately before entering sleep mode.</dd>
<dt><strong>Note</strong></dt>
<dd>In revisions 0 and 1 of the ESP32, ext0 wakeup source can not be used together with touch or ULP wakeup sources.</dd>
<dt><strong>Return</strong></dt>
<dd><ul class="simple">
<li>ESP_OK on success</li>
<li>ESP_ERR_INVALID_ARG if the selected GPIO is not an RTC GPIO, or the mode is invalid</li>
<li>ESP_ERR_INVALID_STATE if wakeup triggers conflict </li>
</ul>
</dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal notranslate"><span class="pre">gpio_num</span></code>: GPIO number used as wakeup source. Only GPIOs which are have RTC functionality can be used: 0,2,4,12-15,25-27,32-39. </li>
<li><code class="docutils literal notranslate"><span class="pre">level</span></code>: input level which will trigger wakeup (0=low, 1=high) </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv428esp_sleep_enable_ext1_wakeup8uint64_t28esp_sleep_ext1_wakeup_mode_t">
<span id="_CPPv328esp_sleep_enable_ext1_wakeup8uint64_t28esp_sleep_ext1_wakeup_mode_t"></span><span id="_CPPv228esp_sleep_enable_ext1_wakeup8uint64_t28esp_sleep_ext1_wakeup_mode_t"></span><span id="esp_sleep_enable_ext1_wakeup__uint64_t.esp_sleep_ext1_wakeup_mode_t"></span><span class="target" id="esp__sleep_8h_1aad77f259412b0cc1882829ccb09eaeb1"></span><a class="reference internal" href="esp_err.html#_CPPv49esp_err_t" title="esp_err_t">esp_err_t</a> <code class="descname">esp_sleep_enable_ext1_wakeup</code><span class="sig-paren">(</span>uint64_t <em>mask</em>, <a class="reference internal" href="#_CPPv428esp_sleep_ext1_wakeup_mode_t" title="esp_sleep_ext1_wakeup_mode_t">esp_sleep_ext1_wakeup_mode_t</a> <em>mode</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv428esp_sleep_enable_ext1_wakeup8uint64_t28esp_sleep_ext1_wakeup_mode_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Enable wakeup using multiple pins. </p>
<p>This function uses external wakeup feature of RTC controller. It will work even if RTC peripherals are shut down during sleep.</p>
<p>This feature can monitor any number of pins which are in RTC IOs. Once any of the selected pins goes into the state given by mode argument, the chip will be woken up.</p>
<p><dl class="docutils">
<dt><strong>Note</strong></dt>
<dd>This function does not modify pin configuration. The pins are configured in esp_sleep_start, immediately before entering sleep mode.</dd>
<dt><strong>Note</strong></dt>
<dd>internal pullups and pulldowns don’t work when RTC peripherals are shut down. In this case, external resistors need to be added. Alternatively, RTC peripherals (and pullups/pulldowns) may be kept enabled using esp_sleep_pd_config function.</dd>
<dt><strong>Return</strong></dt>
<dd><ul class="simple">
<li>ESP_OK on success</li>
<li>ESP_ERR_INVALID_ARG if any of the selected GPIOs is not an RTC GPIO, or mode is invalid </li>
</ul>
</dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal notranslate"><span class="pre">mask</span></code>: bit mask of GPIO numbers which will cause wakeup. Only GPIOs which are have RTC functionality can be used in this bit map: 0,2,4,12-15,25-27,32-39. </li>
<li><code class="docutils literal notranslate"><span class="pre">mode</span></code>: select logic function used to determine wakeup condition:<ul>
<li>ESP_EXT1_WAKEUP_ALL_LOW: wake up when all selected GPIOs are low</li>
<li>ESP_EXT1_WAKEUP_ANY_HIGH: wake up when any of the selected GPIOs is high </li>
</ul>
</li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv428esp_sleep_enable_gpio_wakeupv">
<span id="_CPPv328esp_sleep_enable_gpio_wakeupv"></span><span id="_CPPv228esp_sleep_enable_gpio_wakeupv"></span><span id="esp_sleep_enable_gpio_wakeup__void"></span><span class="target" id="esp__sleep_8h_1aa54aa7764ed851b205671f65bd7248e6"></span><a class="reference internal" href="esp_err.html#_CPPv49esp_err_t" title="esp_err_t">esp_err_t</a> <code class="descname">esp_sleep_enable_gpio_wakeup</code><span class="sig-paren">(</span>void<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv428esp_sleep_enable_gpio_wakeupv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Enable wakeup from light sleep using GPIOs. </p>
<p>Each GPIO supports wakeup function, which can be triggered on either low level or high level. Unlike EXT0 and EXT1 wakeup sources, this method can be used both for all IOs: RTC IOs and digital IOs. It can only be used to wakeup from light sleep though.</p>
<p>To enable wakeup, first call gpio_wakeup_enable, specifying gpio number and wakeup level, for each GPIO which is used for wakeup. Then call this function to enable wakeup feature.</p>
<p><dl class="docutils">
<dt><strong>Note</strong></dt>
<dd>In revisions 0 and 1 of the ESP32, GPIO wakeup source can not be used together with touch or ULP wakeup sources.</dd>
<dt><strong>Return</strong></dt>
<dd><ul class="simple">
<li>ESP_OK on success</li>
<li>ESP_ERR_INVALID_STATE if wakeup triggers conflict </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv428esp_sleep_enable_uart_wakeupi">
<span id="_CPPv328esp_sleep_enable_uart_wakeupi"></span><span id="_CPPv228esp_sleep_enable_uart_wakeupi"></span><span id="esp_sleep_enable_uart_wakeup__i"></span><span class="target" id="esp__sleep_8h_1aba663fd929cb2006a4e3b8a666cd63ec"></span><a class="reference internal" href="esp_err.html#_CPPv49esp_err_t" title="esp_err_t">esp_err_t</a> <code class="descname">esp_sleep_enable_uart_wakeup</code><span class="sig-paren">(</span>int <em>uart_num</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv428esp_sleep_enable_uart_wakeupi" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Enable wakeup from light sleep using UART. </p>
<p>Use uart_set_wakeup_threshold function to configure UART wakeup threshold.</p>
<p>Wakeup from light sleep takes some time, so not every character sent to the UART can be received by the application.</p>
<p><dl class="docutils">
<dt><strong>Note</strong></dt>
<dd>ESP32 does not support wakeup from UART2.</dd>
<dt><strong>Return</strong></dt>
<dd><ul class="simple">
<li>ESP_OK on success</li>
<li>ESP_ERR_INVALID_ARG if wakeup from given UART is not supported </li>
</ul>
</dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal notranslate"><span class="pre">uart_num</span></code>: UART port to wake up from </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv432esp_sleep_get_ext1_wakeup_statusv">
<span id="_CPPv332esp_sleep_get_ext1_wakeup_statusv"></span><span id="_CPPv232esp_sleep_get_ext1_wakeup_statusv"></span><span id="esp_sleep_get_ext1_wakeup_status__void"></span><span class="target" id="esp__sleep_8h_1aa4a24a3ae25910689d743e4b0bf1f7b8"></span>uint64_t <code class="descname">esp_sleep_get_ext1_wakeup_status</code><span class="sig-paren">(</span>void<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv432esp_sleep_get_ext1_wakeup_statusv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Get the bit mask of GPIOs which caused wakeup (ext1) </p>
<p>If wakeup was caused by another source, this function will return 0.</p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd>bit mask, if GPIOn caused wakeup, BIT(n) will be set </dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv419esp_sleep_pd_config21esp_sleep_pd_domain_t21esp_sleep_pd_option_t">
<span id="_CPPv319esp_sleep_pd_config21esp_sleep_pd_domain_t21esp_sleep_pd_option_t"></span><span id="_CPPv219esp_sleep_pd_config21esp_sleep_pd_domain_t21esp_sleep_pd_option_t"></span><span id="esp_sleep_pd_config__esp_sleep_pd_domain_t.esp_sleep_pd_option_t"></span><span class="target" id="esp__sleep_8h_1a0b9e62edc70f5811acf9ed71323a769a"></span><a class="reference internal" href="esp_err.html#_CPPv49esp_err_t" title="esp_err_t">esp_err_t</a> <code class="descname">esp_sleep_pd_config</code><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv421esp_sleep_pd_domain_t" title="esp_sleep_pd_domain_t">esp_sleep_pd_domain_t</a> <em>domain</em>, <a class="reference internal" href="#_CPPv421esp_sleep_pd_option_t" title="esp_sleep_pd_option_t">esp_sleep_pd_option_t</a> <em>option</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv419esp_sleep_pd_config21esp_sleep_pd_domain_t21esp_sleep_pd_option_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Set power down mode for an RTC power domain in sleep mode. </p>
<p>If not set set using this API, all power domains default to ESP_PD_OPTION_AUTO.</p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd><ul class="simple">
<li>ESP_OK on success</li>
<li>ESP_ERR_INVALID_ARG if either of the arguments is out of range </li>
</ul>
</dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal notranslate"><span class="pre">domain</span></code>: power domain to configure </li>
<li><code class="docutils literal notranslate"><span class="pre">option</span></code>: power down option (ESP_PD_OPTION_OFF, ESP_PD_OPTION_ON, or ESP_PD_OPTION_AUTO) </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv420esp_deep_sleep_startv">
<span id="_CPPv320esp_deep_sleep_startv"></span><span id="_CPPv220esp_deep_sleep_startv"></span><span id="esp_deep_sleep_start__void"></span><span class="target" id="esp__sleep_8h_1aaab646dc5c929e79401be3074a194dab"></span>void <code class="descname">esp_deep_sleep_start</code><span class="sig-paren">(</span>void<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv420esp_deep_sleep_startv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Enter deep sleep with the configured wakeup options. </p>
<p>This function does not return. </p>
</dd></dl>

<dl class="function">
<dt id="_CPPv421esp_light_sleep_startv">
<span id="_CPPv321esp_light_sleep_startv"></span><span id="_CPPv221esp_light_sleep_startv"></span><span id="esp_light_sleep_start__void"></span><span class="target" id="esp__sleep_8h_1af809e1a635680bdb6953e056fe37088c"></span><a class="reference internal" href="esp_err.html#_CPPv49esp_err_t" title="esp_err_t">esp_err_t</a> <code class="descname">esp_light_sleep_start</code><span class="sig-paren">(</span>void<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv421esp_light_sleep_startv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Enter light sleep with the configured wakeup options. </p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd><ul class="simple">
<li>ESP_OK on success (returned after wakeup)</li>
<li>ESP_ERR_INVALID_STATE if WiFi or BT is not stopped </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv414esp_deep_sleep8uint64_t">
<span id="_CPPv314esp_deep_sleep8uint64_t"></span><span id="_CPPv214esp_deep_sleep8uint64_t"></span><span id="esp_deep_sleep__uint64_t"></span><span class="target" id="esp__sleep_8h_1a1aef330235c8be02f5c0cd779a333912"></span>void <code class="descname">esp_deep_sleep</code><span class="sig-paren">(</span>uint64_t <em>time_in_us</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv414esp_deep_sleep8uint64_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Enter deep-sleep mode. </p>
<p>The device will automatically wake up after the deep-sleep time Upon waking up, the device calls deep sleep wake stub, and then proceeds to load application.</p>
<p>Call to this function is equivalent to a call to esp_deep_sleep_enable_timer_wakeup followed by a call to esp_deep_sleep_start.</p>
<p>esp_deep_sleep does not shut down WiFi, BT, and higher level protocol connections gracefully. Make sure relevant WiFi and BT stack functions are called to close any connections and deinitialize the peripherals. These include:<ul class="simple">
<li>esp_bluedroid_disable</li>
<li>esp_bt_controller_disable</li>
<li>esp_wifi_stop</li>
</ul>
</p>
<p>This function does not return.</p>
<p><dl class="docutils">
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal notranslate"><span class="pre">time_in_us</span></code>: deep-sleep time, unit: microsecond </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv426esp_sleep_get_wakeup_causev">
<span id="_CPPv326esp_sleep_get_wakeup_causev"></span><span id="_CPPv226esp_sleep_get_wakeup_causev"></span><span id="esp_sleep_get_wakeup_cause__void"></span><span class="target" id="esp__sleep_8h_1ab052ea488a7f3319a46c5db5a31fb59c"></span><a class="reference internal" href="#_CPPv424esp_sleep_wakeup_cause_t" title="esp_sleep_wakeup_cause_t">esp_sleep_wakeup_cause_t</a> <code class="descname">esp_sleep_get_wakeup_cause</code><span class="sig-paren">(</span>void<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv426esp_sleep_get_wakeup_causev" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Get the wakeup source which caused wakeup from sleep. </p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd>cause of wake up from last sleep (deep sleep or light sleep) </dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv419esp_wake_deep_sleepv">
<span id="_CPPv319esp_wake_deep_sleepv"></span><span id="_CPPv219esp_wake_deep_sleepv"></span><span id="esp_wake_deep_sleep__void"></span><span class="target" id="esp__sleep_8h_1a0b71eb3acc3a86dad1813a6a20529a53"></span>void <code class="descname">esp_wake_deep_sleep</code><span class="sig-paren">(</span>void<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv419esp_wake_deep_sleepv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Default stub to run on wake from deep sleep. </p>
<p>Allows for executing code immediately on wake from sleep, before the software bootloader or ESP-IDF app has started up.</p>
<p>This function is weak-linked, so you can implement your own version to run code immediately when the chip wakes from sleep.</p>
<p>See docs/deep-sleep-stub.rst for details. </p>
</dd></dl>

<dl class="function">
<dt id="_CPPv428esp_set_deep_sleep_wake_stub29esp_deep_sleep_wake_stub_fn_t">
<span id="_CPPv328esp_set_deep_sleep_wake_stub29esp_deep_sleep_wake_stub_fn_t"></span><span id="_CPPv228esp_set_deep_sleep_wake_stub29esp_deep_sleep_wake_stub_fn_t"></span><span id="esp_set_deep_sleep_wake_stub__esp_deep_sleep_wake_stub_fn_t"></span><span class="target" id="esp__sleep_8h_1a28e9e608be308c5d7035fa22cfc7d660"></span>void <code class="descname">esp_set_deep_sleep_wake_stub</code><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv429esp_deep_sleep_wake_stub_fn_t" title="esp_deep_sleep_wake_stub_fn_t">esp_deep_sleep_wake_stub_fn_t</a> <em>new_stub</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv428esp_set_deep_sleep_wake_stub29esp_deep_sleep_wake_stub_fn_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Install a new stub at runtime to run on wake from deep sleep. </p>
<p>If implementing esp_wake_deep_sleep() then it is not necessary to call this function.</p>
<p>However, it is possible to call this function to substitute a different deep sleep stub. Any function used as a deep sleep stub must be marked RTC_IRAM_ATTR, and must obey the same rules given for esp_wake_deep_sleep(). </p>
</dd></dl>

<dl class="function">
<dt id="_CPPv428esp_get_deep_sleep_wake_stubv">
<span id="_CPPv328esp_get_deep_sleep_wake_stubv"></span><span id="_CPPv228esp_get_deep_sleep_wake_stubv"></span><span id="esp_get_deep_sleep_wake_stub__void"></span><span class="target" id="esp__sleep_8h_1ad3fa90e99f46b2380f088e6ec95355ba"></span><a class="reference internal" href="#_CPPv429esp_deep_sleep_wake_stub_fn_t" title="esp_deep_sleep_wake_stub_fn_t">esp_deep_sleep_wake_stub_fn_t</a> <code class="descname">esp_get_deep_sleep_wake_stub</code><span class="sig-paren">(</span>void<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv428esp_get_deep_sleep_wake_stubv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Get current wake from deep sleep stub. </p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd>Return current wake from deep sleep stub, or NULL if no stub is installed. </dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv427esp_default_wake_deep_sleepv">
<span id="_CPPv327esp_default_wake_deep_sleepv"></span><span id="_CPPv227esp_default_wake_deep_sleepv"></span><span id="esp_default_wake_deep_sleep__void"></span><span class="target" id="esp__sleep_8h_1a1373d7493d398449918abaeadffb351a"></span>void <code class="descname">esp_default_wake_deep_sleep</code><span class="sig-paren">(</span>void<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv427esp_default_wake_deep_sleepv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The default esp-idf-provided esp_wake_deep_sleep() stub. </p>
<p>See docs/deep-sleep-stub.rst for details. </p>
</dd></dl>

<dl class="function">
<dt id="_CPPv434esp_deep_sleep_disable_rom_loggingv">
<span id="_CPPv334esp_deep_sleep_disable_rom_loggingv"></span><span id="_CPPv234esp_deep_sleep_disable_rom_loggingv"></span><span id="esp_deep_sleep_disable_rom_logging__void"></span><span class="target" id="esp__sleep_8h_1ab611cb52689e4cb6d80ac0d1b58ee09c"></span>void <code class="descname">esp_deep_sleep_disable_rom_logging</code><span class="sig-paren">(</span>void<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv434esp_deep_sleep_disable_rom_loggingv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Disable logging from the ROM code after deep sleep. </p>
<p>Using LSB of RTC_STORE4. </p>
</dd></dl>

</div>
<div class="section" id="type-definitions">
<h3>Type Definitions<a class="headerlink" href="#type-definitions" title="Permalink to this headline">¶</a></h3>
<dl class="type">
<dt id="_CPPv424esp_sleep_wakeup_cause_t">
<span id="_CPPv324esp_sleep_wakeup_cause_t"></span><span id="_CPPv224esp_sleep_wakeup_cause_t"></span><span id="esp_sleep_wakeup_cause_t"></span><span class="target" id="esp__sleep_8h_1a49bc0850fb4f1b360639d6d9fddabe1c"></span><em class="property">typedef </em><a class="reference internal" href="#_CPPv418esp_sleep_source_t" title="esp_sleep_source_t">esp_sleep_source_t</a> <code class="descname">esp_sleep_wakeup_cause_t</code><a class="headerlink" href="#_CPPv424esp_sleep_wakeup_cause_t" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="type">
<dt id="_CPPv429esp_deep_sleep_wake_stub_fn_t">
<span id="_CPPv329esp_deep_sleep_wake_stub_fn_t"></span><span id="_CPPv229esp_deep_sleep_wake_stub_fn_t"></span><span id="esp_deep_sleep_wake_stub_fn_t"></span><span class="target" id="esp__sleep_8h_1a259d82fc0eeea248abc84e054fb83ed1"></span><em class="property">typedef </em>void (*<code class="descname">esp_deep_sleep_wake_stub_fn_t</code>)<span class="sig-paren">(</span>void<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv429esp_deep_sleep_wake_stub_fn_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Function type for stub to run on wake from sleep. </p>
</dd></dl>

</div>
<div class="section" id="enumerations">
<h3>Enumerations<a class="headerlink" href="#enumerations" title="Permalink to this headline">¶</a></h3>
<dl class="type">
<dt id="_CPPv428esp_sleep_ext1_wakeup_mode_t">
<span id="_CPPv328esp_sleep_ext1_wakeup_mode_t"></span><span id="_CPPv228esp_sleep_ext1_wakeup_mode_t"></span><span id="esp_sleep_ext1_wakeup_mode_t"></span><span class="target" id="esp__sleep_8h_1a59e4ee8b694634410244984273634a27"></span><em class="property">enum </em><code class="descname">esp_sleep_ext1_wakeup_mode_t</code><a class="headerlink" href="#_CPPv428esp_sleep_ext1_wakeup_mode_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Logic function used for EXT1 wakeup mode. </p>
<p><em>Values:</em></p>
<dl class="enumerator">
<dt id="_CPPv423ESP_EXT1_WAKEUP_ALL_LOW">
<span id="_CPPv323ESP_EXT1_WAKEUP_ALL_LOW"></span><span id="_CPPv223ESP_EXT1_WAKEUP_ALL_LOW"></span><span class="target" id="esp__sleep_8h_1a59e4ee8b694634410244984273634a27a015b0e3182e78ef7bea49c63e2917442"></span><code class="descname">ESP_EXT1_WAKEUP_ALL_LOW</code> = 0<a class="headerlink" href="#_CPPv423ESP_EXT1_WAKEUP_ALL_LOW" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Wake the chip when all selected GPIOs go low. </p>
</dd></dl>

<dl class="enumerator">
<dt id="_CPPv424ESP_EXT1_WAKEUP_ANY_HIGH">
<span id="_CPPv324ESP_EXT1_WAKEUP_ANY_HIGH"></span><span id="_CPPv224ESP_EXT1_WAKEUP_ANY_HIGH"></span><span class="target" id="esp__sleep_8h_1a59e4ee8b694634410244984273634a27a0e5205e8ae9e4b0aa0c4fc07afc45d20"></span><code class="descname">ESP_EXT1_WAKEUP_ANY_HIGH</code> = 1<a class="headerlink" href="#_CPPv424ESP_EXT1_WAKEUP_ANY_HIGH" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Wake the chip when any of the selected GPIOs go high. </p>
</dd></dl>

</dd></dl>

<dl class="type">
<dt id="_CPPv421esp_sleep_pd_domain_t">
<span id="_CPPv321esp_sleep_pd_domain_t"></span><span id="_CPPv221esp_sleep_pd_domain_t"></span><span id="esp_sleep_pd_domain_t"></span><span class="target" id="esp__sleep_8h_1a537e34af6cbc6ea60328c231f25a5d3b"></span><em class="property">enum </em><code class="descname">esp_sleep_pd_domain_t</code><a class="headerlink" href="#_CPPv421esp_sleep_pd_domain_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Power domains which can be powered down in sleep mode. </p>
<p><em>Values:</em></p>
<dl class="enumerator">
<dt id="_CPPv424ESP_PD_DOMAIN_RTC_PERIPH">
<span id="_CPPv324ESP_PD_DOMAIN_RTC_PERIPH"></span><span id="_CPPv224ESP_PD_DOMAIN_RTC_PERIPH"></span><span class="target" id="esp__sleep_8h_1a537e34af6cbc6ea60328c231f25a5d3ba9bfb741d7788ffcf3234adf7322c733e"></span><code class="descname">ESP_PD_DOMAIN_RTC_PERIPH</code><a class="headerlink" href="#_CPPv424ESP_PD_DOMAIN_RTC_PERIPH" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>RTC IO, sensors and ULP co-processor. </p>
</dd></dl>

<dl class="enumerator">
<dt id="_CPPv426ESP_PD_DOMAIN_RTC_SLOW_MEM">
<span id="_CPPv326ESP_PD_DOMAIN_RTC_SLOW_MEM"></span><span id="_CPPv226ESP_PD_DOMAIN_RTC_SLOW_MEM"></span><span class="target" id="esp__sleep_8h_1a537e34af6cbc6ea60328c231f25a5d3ba00413d024925ca3d136aaf4cfa187ccc"></span><code class="descname">ESP_PD_DOMAIN_RTC_SLOW_MEM</code><a class="headerlink" href="#_CPPv426ESP_PD_DOMAIN_RTC_SLOW_MEM" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>RTC slow memory. </p>
</dd></dl>

<dl class="enumerator">
<dt id="_CPPv426ESP_PD_DOMAIN_RTC_FAST_MEM">
<span id="_CPPv326ESP_PD_DOMAIN_RTC_FAST_MEM"></span><span id="_CPPv226ESP_PD_DOMAIN_RTC_FAST_MEM"></span><span class="target" id="esp__sleep_8h_1a537e34af6cbc6ea60328c231f25a5d3ba5f5a6de6c8226092c638632f5e6e7803"></span><code class="descname">ESP_PD_DOMAIN_RTC_FAST_MEM</code><a class="headerlink" href="#_CPPv426ESP_PD_DOMAIN_RTC_FAST_MEM" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>RTC fast memory. </p>
</dd></dl>

<dl class="enumerator">
<dt id="_CPPv418ESP_PD_DOMAIN_XTAL">
<span id="_CPPv318ESP_PD_DOMAIN_XTAL"></span><span id="_CPPv218ESP_PD_DOMAIN_XTAL"></span><span class="target" id="esp__sleep_8h_1a537e34af6cbc6ea60328c231f25a5d3bab8214d4331241173972711280ba5db24"></span><code class="descname">ESP_PD_DOMAIN_XTAL</code><a class="headerlink" href="#_CPPv418ESP_PD_DOMAIN_XTAL" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>XTAL oscillator. </p>
</dd></dl>

<dl class="enumerator">
<dt id="_CPPv417ESP_PD_DOMAIN_MAX">
<span id="_CPPv317ESP_PD_DOMAIN_MAX"></span><span id="_CPPv217ESP_PD_DOMAIN_MAX"></span><span class="target" id="esp__sleep_8h_1a537e34af6cbc6ea60328c231f25a5d3bac6e03b0c8323dc9eb574b7f99c58fcfc"></span><code class="descname">ESP_PD_DOMAIN_MAX</code><a class="headerlink" href="#_CPPv417ESP_PD_DOMAIN_MAX" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Number of domains. </p>
</dd></dl>

</dd></dl>

<dl class="type">
<dt id="_CPPv421esp_sleep_pd_option_t">
<span id="_CPPv321esp_sleep_pd_option_t"></span><span id="_CPPv221esp_sleep_pd_option_t"></span><span id="esp_sleep_pd_option_t"></span><span class="target" id="esp__sleep_8h_1a4d6bcbb6b09439fb877e6a94e4099552"></span><em class="property">enum </em><code class="descname">esp_sleep_pd_option_t</code><a class="headerlink" href="#_CPPv421esp_sleep_pd_option_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Power down options. </p>
<p><em>Values:</em></p>
<dl class="enumerator">
<dt id="_CPPv417ESP_PD_OPTION_OFF">
<span id="_CPPv317ESP_PD_OPTION_OFF"></span><span id="_CPPv217ESP_PD_OPTION_OFF"></span><span class="target" id="esp__sleep_8h_1a4d6bcbb6b09439fb877e6a94e4099552aa6d39d13b6bcbd4768e64f2e82bd39f4"></span><code class="descname">ESP_PD_OPTION_OFF</code><a class="headerlink" href="#_CPPv417ESP_PD_OPTION_OFF" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Power down the power domain in sleep mode. </p>
</dd></dl>

<dl class="enumerator">
<dt id="_CPPv416ESP_PD_OPTION_ON">
<span id="_CPPv316ESP_PD_OPTION_ON"></span><span id="_CPPv216ESP_PD_OPTION_ON"></span><span class="target" id="esp__sleep_8h_1a4d6bcbb6b09439fb877e6a94e4099552ac107569619e115f5dc9ba37234205cda"></span><code class="descname">ESP_PD_OPTION_ON</code><a class="headerlink" href="#_CPPv416ESP_PD_OPTION_ON" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Keep power domain enabled during sleep mode. </p>
</dd></dl>

<dl class="enumerator">
<dt id="_CPPv418ESP_PD_OPTION_AUTO">
<span id="_CPPv318ESP_PD_OPTION_AUTO"></span><span id="_CPPv218ESP_PD_OPTION_AUTO"></span><span class="target" id="esp__sleep_8h_1a4d6bcbb6b09439fb877e6a94e4099552a33fc2d1890e28d2cfa3c9887a2dc8938"></span><code class="descname">ESP_PD_OPTION_AUTO</code><a class="headerlink" href="#_CPPv418ESP_PD_OPTION_AUTO" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Keep power domain enabled in sleep mode, if it is needed by one of the wakeup options. Otherwise power it down. </p>
</dd></dl>

</dd></dl>

<dl class="type">
<dt id="_CPPv418esp_sleep_source_t">
<span id="_CPPv318esp_sleep_source_t"></span><span id="_CPPv218esp_sleep_source_t"></span><span id="esp_sleep_source_t"></span><span class="target" id="esp__sleep_8h_1ab0c5a40853767ff62c91ed79f5e8f77e"></span><em class="property">enum </em><code class="descname">esp_sleep_source_t</code><a class="headerlink" href="#_CPPv418esp_sleep_source_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Sleep wakeup cause. </p>
<p><em>Values:</em></p>
<dl class="enumerator">
<dt id="_CPPv426ESP_SLEEP_WAKEUP_UNDEFINED">
<span id="_CPPv326ESP_SLEEP_WAKEUP_UNDEFINED"></span><span id="_CPPv226ESP_SLEEP_WAKEUP_UNDEFINED"></span><span class="target" id="esp__sleep_8h_1ab0c5a40853767ff62c91ed79f5e8f77eadf7d386748701c5c253c7986d42b71f5"></span><code class="descname">ESP_SLEEP_WAKEUP_UNDEFINED</code><a class="headerlink" href="#_CPPv426ESP_SLEEP_WAKEUP_UNDEFINED" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>In case of deep sleep, reset was not caused by exit from deep sleep. </p>
</dd></dl>

<dl class="enumerator">
<dt id="_CPPv420ESP_SLEEP_WAKEUP_ALL">
<span id="_CPPv320ESP_SLEEP_WAKEUP_ALL"></span><span id="_CPPv220ESP_SLEEP_WAKEUP_ALL"></span><span class="target" id="esp__sleep_8h_1ab0c5a40853767ff62c91ed79f5e8f77ea23fbc1965d79466f6332816941548a83"></span><code class="descname">ESP_SLEEP_WAKEUP_ALL</code><a class="headerlink" href="#_CPPv420ESP_SLEEP_WAKEUP_ALL" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Not a wakeup cause, used to disable all wakeup sources with esp_sleep_disable_wakeup_source. </p>
</dd></dl>

<dl class="enumerator">
<dt id="_CPPv421ESP_SLEEP_WAKEUP_EXT0">
<span id="_CPPv321ESP_SLEEP_WAKEUP_EXT0"></span><span id="_CPPv221ESP_SLEEP_WAKEUP_EXT0"></span><span class="target" id="esp__sleep_8h_1ab0c5a40853767ff62c91ed79f5e8f77eabaff3e5b3c50a0dc9a56822b9bed3a9e"></span><code class="descname">ESP_SLEEP_WAKEUP_EXT0</code><a class="headerlink" href="#_CPPv421ESP_SLEEP_WAKEUP_EXT0" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Wakeup caused by external signal using RTC_IO. </p>
</dd></dl>

<dl class="enumerator">
<dt id="_CPPv421ESP_SLEEP_WAKEUP_EXT1">
<span id="_CPPv321ESP_SLEEP_WAKEUP_EXT1"></span><span id="_CPPv221ESP_SLEEP_WAKEUP_EXT1"></span><span class="target" id="esp__sleep_8h_1ab0c5a40853767ff62c91ed79f5e8f77ea5bdb7df8d4e8dca78c3985538deb2848"></span><code class="descname">ESP_SLEEP_WAKEUP_EXT1</code><a class="headerlink" href="#_CPPv421ESP_SLEEP_WAKEUP_EXT1" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Wakeup caused by external signal using RTC_CNTL. </p>
</dd></dl>

<dl class="enumerator">
<dt id="_CPPv422ESP_SLEEP_WAKEUP_TIMER">
<span id="_CPPv322ESP_SLEEP_WAKEUP_TIMER"></span><span id="_CPPv222ESP_SLEEP_WAKEUP_TIMER"></span><span class="target" id="esp__sleep_8h_1ab0c5a40853767ff62c91ed79f5e8f77ead40d5379c43a56dd4b40497213ced9a4"></span><code class="descname">ESP_SLEEP_WAKEUP_TIMER</code><a class="headerlink" href="#_CPPv422ESP_SLEEP_WAKEUP_TIMER" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Wakeup caused by timer. </p>
</dd></dl>

<dl class="enumerator">
<dt id="_CPPv425ESP_SLEEP_WAKEUP_TOUCHPAD">
<span id="_CPPv325ESP_SLEEP_WAKEUP_TOUCHPAD"></span><span id="_CPPv225ESP_SLEEP_WAKEUP_TOUCHPAD"></span><span class="target" id="esp__sleep_8h_1ab0c5a40853767ff62c91ed79f5e8f77eae0ac52e5176c91bee7334634885e3d00"></span><code class="descname">ESP_SLEEP_WAKEUP_TOUCHPAD</code><a class="headerlink" href="#_CPPv425ESP_SLEEP_WAKEUP_TOUCHPAD" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Wakeup caused by touchpad. </p>
</dd></dl>

<dl class="enumerator">
<dt id="_CPPv420ESP_SLEEP_WAKEUP_ULP">
<span id="_CPPv320ESP_SLEEP_WAKEUP_ULP"></span><span id="_CPPv220ESP_SLEEP_WAKEUP_ULP"></span><span class="target" id="esp__sleep_8h_1ab0c5a40853767ff62c91ed79f5e8f77ea5669c91f44a45a6836a82a93a713d9d0"></span><code class="descname">ESP_SLEEP_WAKEUP_ULP</code><a class="headerlink" href="#_CPPv420ESP_SLEEP_WAKEUP_ULP" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Wakeup caused by ULP program. </p>
</dd></dl>

<dl class="enumerator">
<dt id="_CPPv421ESP_SLEEP_WAKEUP_GPIO">
<span id="_CPPv321ESP_SLEEP_WAKEUP_GPIO"></span><span id="_CPPv221ESP_SLEEP_WAKEUP_GPIO"></span><span class="target" id="esp__sleep_8h_1ab0c5a40853767ff62c91ed79f5e8f77ead1a9d59e39eebe93d9c217fadd6fbefa"></span><code class="descname">ESP_SLEEP_WAKEUP_GPIO</code><a class="headerlink" href="#_CPPv421ESP_SLEEP_WAKEUP_GPIO" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Wakeup caused by GPIO (light sleep only) </p>
</dd></dl>

<dl class="enumerator">
<dt id="_CPPv421ESP_SLEEP_WAKEUP_UART">
<span id="_CPPv321ESP_SLEEP_WAKEUP_UART"></span><span id="_CPPv221ESP_SLEEP_WAKEUP_UART"></span><span class="target" id="esp__sleep_8h_1ab0c5a40853767ff62c91ed79f5e8f77ea536d9f7e5b88ebb404202072c433bc26"></span><code class="descname">ESP_SLEEP_WAKEUP_UART</code><a class="headerlink" href="#_CPPv421ESP_SLEEP_WAKEUP_UART" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Wakeup caused by UART (light sleep only) </p>
</dd></dl>

</dd></dl>

</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="wdts.html" class="btn btn-neutral float-right" title="Watchdogs" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="power_management.html" class="btn btn-neutral float-left" title="Power Management" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016 - 2019, Espressif Systems (Shanghai) CO., LTD
      
        <span class="commit">
          Revision <code>f9108063</code>.
        </span>
      

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org/">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Read the Docs</span>
      v: latest
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Versions</dt>
        
          <dd><a href="https://docs.espressif.com/en/latest/">latest</a></dd>
        
          <dd><a href="https://docs.espressif.com/en/stable/">stable</a></dd>
        
          <dd><a href="https://docs.espressif.com/en/v4.0-rc/">v4.0-rc</a></dd>
        
          <dd><a href="https://docs.espressif.com/en/v4.0-beta2/">v4.0-beta2</a></dd>
        
          <dd><a href="https://docs.espressif.com/en/v3.3.1/">v3.3.1</a></dd>
        
          <dd><a href="https://docs.espressif.com/en/v3.3/">v3.3</a></dd>
        
          <dd><a href="https://docs.espressif.com/en/v3.2.3/">v3.2.3</a></dd>
        
          <dd><a href="https://docs.espressif.com/en/v3.2.2/">v3.2.2</a></dd>
        
          <dd><a href="https://docs.espressif.com/en/v3.1.6/">v3.1.6</a></dd>
        
          <dd><a href="https://docs.espressif.com/en/v3.1.5/">v3.1.5</a></dd>
        
          <dd><a href="https://docs.espressif.com/en/v3.0.9/">v3.0.9</a></dd>
        
          <dd><a href="https://docs.espressif.com/en/release-v4.1/">release-v4.1</a></dd>
        
          <dd><a href="https://docs.espressif.com/en/release-v4.0/">release-v4.0</a></dd>
        
          <dd><a href="https://docs.espressif.com/en/release-v3.3/">release-v3.3</a></dd>
        
          <dd><a href="https://docs.espressif.com/en/release-v3.2/">release-v3.2</a></dd>
        
          <dd><a href="https://docs.espressif.com/en/release-v3.1/">release-v3.1</a></dd>
        
          <dd><a href="https://docs.espressif.com/en/release-v3.0/">release-v3.0</a></dd>
        
      </dl>
      <dl>
        <dt>Downloads</dt>
        
          <dd><a href="http://docs.espressif.com/_/downloads/esp-idf/en/latest/pdf/">pdf</a></dd>
        
      </dl>
      <dl>
        <dt>On Read the Docs</dt>
          <dd>
            <a href="http://readthedocs.com/projects/espressif-esp-idf/?fromdocs=espressif-esp-idf">Project Home</a>
          </dd>
          <dd>
            <a href="http://readthedocs.com/builds/espressif-esp-idf/?fromdocs=espressif-esp-idf">Builds</a>
          </dd>
      </dl>
      <hr/>
      Free document hosting provided by <a href="http://www.readthedocs.org/">Read the Docs</a>.

    </div>
  </div>



  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
   

</body>

<!-- Mirrored from docs.espressif.com/projects/esp-idf/en/latest/api-reference/system/sleep_modes.html by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 29 Feb 2020 06:26:12 GMT -->
</html>